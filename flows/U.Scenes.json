[
  {
    "id": "2365e16185f43e03",
    "type": "tab",
    "label": "U.Scenes",
    "disabled": false,
    "info": "",
    "env": []
  },
  {
    "id": "29799cbbbafa3ded",
    "type": "group",
    "z": "2365e16185f43e03",
    "name": "catch error",
    "style": {
      "fill": "#ff0000",
      "fill-opacity": "0.05",
      "label": true,
      "stroke": "#ff0000"
    },
    "nodes": [
      "57833b8882f2f3f0",
      "a07c3bb746445ea8",
      "65f60f513ebfb4ec"
    ],
    "x": 534,
    "y": 19,
    "w": 422,
    "h": 82
  },
  {
    "id": "391ec7c03beaed05",
    "type": "group",
    "z": "2365e16185f43e03",
    "name": "scenes - bucket",
    "style": {
      "fill": "#ffC000",
      "fill-opacity": "0.05",
      "label": true,
      "stroke": "#ffC000"
    },
    "nodes": [
      "a1054d58b95dbc48",
      "85ebc176bf8b3f38",
      "d92386370d84c100"
    ],
    "x": 94,
    "y": 19,
    "w": 342,
    "h": 82
  },
  {
    "id": "3a3b15706a4f52c8",
    "type": "group",
    "z": "2365e16185f43e03",
    "name": "scenes - add scene",
    "style": {
      "label": true,
      "fill": "#6f2fa0",
      "fill-opacity": "0.05"
    },
    "nodes": [
      "72ffa082cbdc1b9d",
      "5a9f6ed4d2782bc6",
      "8baf78fc5b3a6764",
      "c92344781b6fad03",
      "db579c1fe924a2c1",
      "dd61619c1c937b10",
      "ab93c45aeece527e",
      "d353d0189ecf7f81",
      "251f1801fba21ab0",
      "c3b6b0792764609a",
      "380eefbfb46f3a27",
      "ca5d39b702b03571",
      "d24a93e61eae3c55",
      "e9aff2124a3f14e7",
      "7716fc16ed250b25",
      "5ede26c96e5cab06",
      "934dc60f940169b5",
      "0d183185e153399c",
      "f50307318be3d784",
      "9f397c7d7826bf47",
      "27e11297c93404a6",
      "71e09030c5018a86",
      "7dc2df581430d4d1",
      "ecc0370d843384ba",
      "bf20df3841df8f08",
      "e082053ef394efe4",
      "a8e111e3fe3d2a80",
      "61fa65faa84a6ec6",
      "305f8572101f2828",
      "dc9f51f48adc1d8a",
      "86f50642027670e1",
      "98d0f4551cf7be28",
      "611c8a5cd84bb73d",
      "aa5b3856a38f9e8d"
    ],
    "x": 74,
    "y": 199,
    "w": 1898,
    "h": 3428
  },
  {
    "id": "ba3f7159e9c41676",
    "type": "group",
    "z": "2365e16185f43e03",
    "name": "scenes - add trigger",
    "style": {
      "fill": "#6f2fa0",
      "fill-opacity": "0.05",
      "label": true
    },
    "nodes": [
      "c715b34bd8c7144e",
      "acf663c8932fb635",
      "852b5a25f14c20c6",
      "2cc720203fa29afe",
      "c0d3cb23c9507a3b",
      "d29ab01e7feb7c8a",
      "74a4ed4dc627a311",
      "70e8540a9e38ea1b",
      "6a28b7fcc76e5423",
      "52995e16ab89a506",
      "18abfea89e3b41b7",
      "bab19150c0c5380a",
      "a808a0b1094b6686",
      "92b4cb9321db429e",
      "284a076d451ace1d",
      "a8104e49d5de21fc",
      "0f613980bbb88aec",
      "7e331b1381065059",
      "e44628f535d5b1cb",
      "aeb2a0a395a07f56",
      "2ad50ca6f102ad06",
      "be4e8eb0027dcf54",
      "8012222b2d1c8511",
      "75cebf8401b56f16",
      "ef40f0f28d4b23a0",
      "92d3382419ded8c9",
      "609602a97afb8342",
      "dfe33f11952c084b",
      "460ba30d5c96b8cc",
      "b4448524cdeff7e5",
      "80a0e335e884b052",
      "9790caaee9c5957b",
      "12b058f0dc39a192",
      "264193b117c3f150",
      "adab55e820cad54d",
      "534f26b628d7ca3c",
      "d72e4ee0d2b4084d",
      "502addd457658917",
      "210ef3304012897f",
      "6f93c6bcc4a65c4d",
      "357a49acee942fd1",
      "61282a89cda06158",
      "964d600b050df4fc",
      "5d3298bda1ca0932",
      "f8749556560c8526",
      "3bbe844fffdf20ed",
      "7044da8f08b09895",
      "242995af11794e53",
      "1870deac817325e5",
      "13da4488e5901405",
      "6a1a8f3a27e993b3",
      "2accc11944283ad8",
      "c98c47082b028dd0",
      "eae0eb6cb3648279",
      "77b5fcb42cefbcf7",
      "52a7726c278388da",
      "16438bfdddf3750d",
      "8dc9910ee0b4af8a",
      "f3b0e08392296b29",
      "33daf357f466a619",
      "fc63cc48fc705844",
      "07f809162cd1c7ff",
      "dc8e1ea48d3d1380",
      "9c9c71c664eee075",
      "af55e037ae50391e",
      "f2369a7f542517f2",
      "3f26dd11ba94f7c0",
      "3b9bcd70499a72a7",
      "2b5138253f338bd9",
      "ee9f0a9d9f5bfded",
      "9555f3b85c4c0239",
      "33023e6e1a555bef",
      "4f54be59fa4e6633",
      "0a0de1ee87778882",
      "d32dc8a93d1ac3ad",
      "7d84766600c7d5a9",
      "94f92b94173718ae",
      "0b77f4879755cf4a",
      "c640900fa4f67a47"
    ],
    "x": 74,
    "y": 4919,
    "w": 3112,
    "h": 1302
  },
  {
    "id": "77a176666a9075c0",
    "type": "group",
    "z": "2365e16185f43e03",
    "name": "scenes - list scenes",
    "style": {
      "label": true,
      "fill": "#6f2fa0",
      "fill-opacity": "0.05"
    },
    "nodes": [
      "9509fcecd56acf35",
      "98256ab7befa37da",
      "3067689be2297942",
      "91316e3eefbcc0cf",
      "8354904bf42824c1",
      "15fa91642ca84b97",
      "c05eff78970180b9",
      "f0e0dfead2456763",
      "1a28a0f57cacac56",
      "c7bd298ffb4de55f",
      "922afa0f092ea7ac",
      "63a06048dc8ec077",
      "5647d49696914090",
      "3c1e652d59e2bc73",
      "d2ca5cbd23e2cf88",
      "c08574254bd03c3d",
      "3822cfa6e7343451",
      "df9cad37a3d97a08",
      "4ffb1946a7f3e562",
      "4b6a5d60e2d13046",
      "51fd890f206eb658",
      "9e20d3f498cdecdb",
      "82b97ac85ee0461e"
    ],
    "x": 74,
    "y": 4319,
    "w": 1992,
    "h": 322
  },
  {
    "id": "19ce5669b4839310",
    "type": "group",
    "z": "2365e16185f43e03",
    "name": "scenes - list triggers",
    "style": {
      "label": true,
      "fill": "#6f2fa0",
      "fill-opacity": "0.05"
    },
    "nodes": [
      "273bd58e8316eb5b",
      "6ffe6ce67f84f151",
      "7a1c0e3a684f732e",
      "af0dcb4755815ad4",
      "ebebd4050c80114d",
      "a428f5c3eb5f8470",
      "95a06b05b8a280dd",
      "e3306978b68a0c62",
      "b766961b6627377c",
      "ee71cf476db60370",
      "5ccb44d34776aeb2",
      "3ecde7539b026698",
      "a8c6849c3d6984a4",
      "fbb6b0967cfaf84c",
      "b9ccd0540ef6392a",
      "3664ee38f2da0806",
      "32f125658d78f3aa",
      "d89153f5c2db6207",
      "ec120ed7d3da5269",
      "7f077aece50a67f1",
      "aea93e1a9e4fe7c3",
      "90755f813c5b2497",
      "f0e3c9e062d72dcf",
      "81dc69f880d9c871",
      "864cbc5606ca463a",
      "da61b3bf319b4fbf",
      "464dc2d69be4c4d2"
    ],
    "x": 74,
    "y": 6679,
    "w": 1992,
    "h": 322
  },
  {
    "id": "fa9acbe70d9d6582",
    "type": "group",
    "z": "2365e16185f43e03",
    "name": "scenes - boot wait",
    "style": {
      "fill": "#ff0000",
      "fill-opacity": "0.05",
      "label": true
    },
    "nodes": [
      "8bb1bba6cd29a251",
      "ee01b93bd48330c2",
      "8d98777b03b2341f"
    ],
    "x": 1034,
    "y": 19,
    "w": 342,
    "h": 82
  },
  {
    "id": "768610170c894620",
    "type": "group",
    "z": "2365e16185f43e03",
    "name": "scenes - delete trigger",
    "style": {
      "label": true,
      "fill": "#6f2fa0",
      "fill-opacity": "0.05"
    },
    "nodes": [
      "0d7f6889440560fb",
      "7e1540e06576c37e",
      "8b992a342f07cc51",
      "58195b7dcdf542c3",
      "11d2871802dc1814",
      "470f6755223e9f3e",
      "feafb2a13eb7aba6",
      "59453ef087594e15",
      "9008dc6f58df69ce",
      "1e77b920b8ef44ae",
      "595d539c1bb100e0",
      "160e62d5b3260c7c",
      "4b8667d43dd55dcb",
      "78ada15151491066",
      "2a2ca29c5017745d",
      "161d87de410f8612",
      "075be5218f4a7fd6",
      "476328732ceaa3e8",
      "87bd2247fe3acc62",
      "8f5a63bf49aa9299",
      "739230f415142b7d",
      "b242db668b449c24",
      "13aa9d0fd7bfb031",
      "c277eb1591ca3505",
      "e7b794a92adb0fc0",
      "9a8393b8175a1953",
      "e63dd52ce5b17aeb",
      "d1d25dc67949b213",
      "a21488eb16a467fa",
      "aaa2bf978d45930d",
      "8f08891f13eb42cf",
      "841c8fa552e5c988",
      "6bc8b0dde43bc773",
      "a70b23ea1fb58b14",
      "81de773ed143c87b",
      "772f392435a3dd17"
    ],
    "x": 74,
    "y": 6259,
    "w": 1992,
    "h": 382
  },
  {
    "id": "55a7f287721494a0",
    "type": "group",
    "z": "2365e16185f43e03",
    "name": "scenes - delete scene",
    "style": {
      "fill": "#6f2fa0",
      "fill-opacity": "0.05",
      "label": true
    },
    "nodes": [
      "9c3c4a7cb6430948",
      "30c14a02c0f6f44c",
      "0a7482cc6cdd853f",
      "40b4d19bc941757b",
      "7f2170d4bb4d440a",
      "2ff8057143b92a16",
      "8350a6fe02a6fcc9",
      "3e66e02f29a82d4a",
      "5d78a0715292c3c2",
      "b6cbee8201e44c52",
      "d64496badea11c6f",
      "0ac636db144a9397",
      "f9d3e83b4c3b52ab",
      "877b1f7344ccaf70",
      "e4a004f86ff46aff",
      "a136f953ea376b1d",
      "fb6eb587f18161c1",
      "602a5ab8762865d1",
      "67c7aaf0ff7fab34",
      "9ead5bc677f88efe",
      "272f978cb81b3211",
      "93217e0ac33a366c",
      "c8b9c27367760c26",
      "4ac9c6a1b0a30d5a",
      "7acc5347e55f2e72",
      "239125f620dff4e7",
      "83d00933c4468207",
      "0913162f8b198348",
      "149e032cefd16ade",
      "5e78b5bb6e312f78",
      "26785f8d855e5ba6",
      "6c449a3408acee90",
      "d7f64b57a1fb0517"
    ],
    "x": 74,
    "y": 3899,
    "w": 1992,
    "h": 382
  },
  {
    "id": "e6436a8697d9ab89",
    "type": "group",
    "z": "2365e16185f43e03",
    "name": "scenes - import export scene",
    "style": {
      "fill": "#6f2fa0",
      "fill-opacity": "0.05",
      "label": true
    },
    "nodes": [
      "53a481fea28e6249",
      "3b9388e0f23ff779",
      "958736f2da5c8819",
      "6d4a931be23710cc",
      "520e9f66eace001e",
      "bef5ab6442d83bbf",
      "97f9e55756ff6676",
      "3214c7c1cc0f2f6f",
      "f41474a7c0413436",
      "55b514867cc57453",
      "a1dc3da3138ba471",
      "03d6c2dca518cd6c",
      "0bf124ea6478968e",
      "eaa3f051c198b9de",
      "52b0cc774f439302",
      "f76cec2087f5d1e2",
      "458d90e34479960c",
      "9635cf6ffe5f5df1"
    ],
    "x": 74,
    "y": 4679,
    "w": 2172,
    "h": 202
  },
  {
    "id": "62f311d43397df29",
    "type": "group",
    "z": "2365e16185f43e03",
    "name": "scenes - import export triggers",
    "style": {
      "fill": "#6f2fa0",
      "fill-opacity": "0.05",
      "label": true
    },
    "nodes": [
      "a3febe192ff0e350",
      "7115d9982b314618",
      "ae1b070d9513420f",
      "79ad5f668b24679c",
      "860477dbbd58b587",
      "fcc5ebf1cf66f1ba",
      "f06ff4146bf015e0",
      "ab92b4e884625b66",
      "d9e7fdd4b2064d1f",
      "9bee7aa2fd078097",
      "d351a3cbef1355a1",
      "1645bbe018d66145",
      "67040f324dd5eda2",
      "2bbb2ae05167c591",
      "e6aaca278df20666",
      "06c3aeb3acba71e8",
      "4d787b54987fe0b5",
      "954786b6d749db39",
      "5279e5dbd0cd1b08",
      "7a051a6f4f35abc8",
      "1e5bc4b34e21f8e5",
      "3263d6b1a159b0ff",
      "30b864529ddd7036",
      "c77a886f99e247b6"
    ],
    "x": 74,
    "y": 7039,
    "w": 3052,
    "h": 202
  },
  {
    "id": "7015463582304bfb",
    "type": "group",
    "z": "2365e16185f43e03",
    "name": "scenes - metrics path",
    "style": {
      "stroke": "#92d04f",
      "fill": "#92d04f",
      "fill-opacity": "0.05",
      "label": true
    },
    "nodes": [
      "8251db7646a04b2f",
      "c633fa7af533e323",
      "5f01b08428c9fcf8",
      "0a5f22f2163e13e8",
      "c0f36549d2db9101",
      "93b51078eda8436a",
      "4f02ff1eca2682e7",
      "b267f5eaee065241",
      "14826dace9f64caa",
      "4677d65857fdd766",
      "2939004b027e19c6",
      "71081512cddb5646",
      "7a783c20a805ad05",
      "3253e25dfac0d9e4",
      "12a0232b035189a9",
      "5201f0235b76c6fd",
      "2f50e7532f5ba3bb",
      "3e8ef8b3ae6caa63",
      "6f7cf94ff85a540e",
      "0cad5e616228dbe6",
      "6f850f006fee6ac4",
      "d9d897c67d8052e6",
      "5d841c98941a9b5a",
      "bb054a0ac21c4e2a"
    ],
    "x": 74,
    "y": 7599,
    "w": 4292,
    "h": 382
  },
  {
    "id": "c3b6b0792764609a",
    "type": "group",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "lighting",
    "style": {
      "fill": "#ffffff",
      "label": true,
      "fill-opacity": "0.25"
    },
    "nodes": [
      "d63fa2d9ced27469",
      "748c32f25da38ab8",
      "1d722faea8f3efce",
      "106e37a95380121b",
      "019d4edaff49edac",
      "72c3e43d1bd7d71e",
      "0a3d4794e7dbc8fc",
      "d0562d12417ddbcd",
      "a61a9ab22c564e7c",
      "7a1b01a19814bffe",
      "a3749ef3434a4a01",
      "abd5ad5bc01e3c20",
      "f978ae555f7467c1",
      "301581685dbc451a",
      "f5ad10239eb3cfc3",
      "68428fa55c773d0e",
      "06e646e07d966f1f",
      "3b1b60fd4fe7a75d",
      "3b26932b59001243",
      "2e2979bb6dcc6553",
      "b0d65e1138250625",
      "96bab19558d83451"
    ],
    "x": 454,
    "y": 2019,
    "w": 1032,
    "h": 562
  },
  {
    "id": "5ede26c96e5cab06",
    "type": "group",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "on / off",
    "style": {
      "fill": "#ffffff",
      "fill-opacity": "0.25",
      "label": true
    },
    "nodes": [
      "5531a15abd8c4ad6",
      "d33123fad66d11c4",
      "955c0f58ef5493c0",
      "31afb8af4711d764",
      "9ad653eca9183816",
      "2c8d914c36108517",
      "99cc12fec7e55af6",
      "c02d9cf308c8c689",
      "6c7268e12e4ddb66",
      "c9f65b1df2bc4d0d",
      "18e76789cedf987f",
      "ac0bce161d183ebb",
      "26bd80d9092552c2",
      "444340c4439ad7df",
      "59d564a9bad5b8d7",
      "f999a6940f409b25",
      "a609d98d8b043604",
      "75cc148180be472d",
      "dcd32241c9d8f9b4",
      "e01a71eb14501808",
      "4c457d101747e608",
      "c41fa2b682849fca",
      "345de8645bc89741"
    ],
    "x": 454,
    "y": 1359,
    "w": 1032,
    "h": 622
  },
  {
    "id": "0d183185e153399c",
    "type": "group",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "common",
    "style": {
      "fill": "#ffffff",
      "fill-opacity": "0.25",
      "label": true
    },
    "nodes": [
      "48cf2bbb95097f63",
      "ee26946f7325dc17",
      "8419fa139418385a",
      "d0b1eeb6835b62fc",
      "43166899a8759ba8",
      "2caa3526ed6f318d",
      "7cea5f900cc829a2",
      "07746cda447f9699"
    ],
    "x": 454,
    "y": 1179,
    "w": 1492,
    "h": 142
  },
  {
    "id": "ecc0370d843384ba",
    "type": "group",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "shading",
    "style": {
      "label": true,
      "fill": "#ffffff",
      "fill-opacity": "0.25"
    },
    "nodes": [
      "f6c8c74c3a9498c9",
      "ab9e2cc1419356f3",
      "40bf6c3509b0b82a",
      "01761be97488508b",
      "dec2bb5c514b76a9",
      "628815a97e6a49d4",
      "65d34bdd2f650120",
      "3d22e5ebcc67c6a4",
      "ba9ac89e95fd17d8",
      "ce6e7ee22c2f80e1",
      "c9c47f942aa9e47c"
    ],
    "x": 454,
    "y": 2619,
    "w": 1032,
    "h": 262
  },
  {
    "id": "a8e111e3fe3d2a80",
    "type": "group",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "custom level",
    "style": {
      "fill": "#ffffff",
      "fill-opacity": "0.26",
      "label": true
    },
    "nodes": [
      "f7b90fe6011a828b",
      "5436202610d4bda0",
      "9afda004f8a34bfe",
      "5c4464e9a6f4156d",
      "9c9fe6dcf666a4f5",
      "fdc361fd00366501",
      "2a05b7fd7c41803e",
      "080732e991ac90fa",
      "5ddb0d681bee936e"
    ],
    "x": 454,
    "y": 2919,
    "w": 1032,
    "h": 202
  },
  {
    "id": "61fa65faa84a6ec6",
    "type": "group",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "airflow",
    "style": {
      "fill": "#ffffff",
      "fill-opacity": "0.25",
      "label": true
    },
    "nodes": [
      "297f97a073fc8b2b",
      "3b307fadcb62da76",
      "3bd767f2b6f40d10",
      "361dbaae56cc5dcf",
      "41b449c7d8e26289"
    ],
    "x": 454,
    "y": 3159,
    "w": 1032,
    "h": 82
  },
  {
    "id": "305f8572101f2828",
    "type": "group",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "cumulus",
    "style": {
      "label": true,
      "fill": "#ffffff",
      "fill-opacity": "0.25"
    },
    "nodes": [
      "cdde925551f9a2f0",
      "fc9bbcdfe0657653",
      "bdc3bb4cfb40ad78",
      "b7e0ba1ac6f9000a",
      "0351d85db24c2a3e",
      "5593308d95ecb45d",
      "311d865b504f9e2b",
      "1c251fd76d55194c",
      "313c321884c92f08"
    ],
    "x": 454,
    "y": 3279,
    "w": 1032,
    "h": 202
  },
  {
    "id": "aa5b3856a38f9e8d",
    "type": "group",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "offloading",
    "style": {
      "fill": "#ffffff",
      "fill-opacity": "0.25",
      "label": true
    },
    "nodes": [
      "eaddd489b98a436f",
      "3d81cbda3748f441",
      "56e2b31789bb941e",
      "dc0df57eb59c0a2c",
      "a575dd7d3df63cc2"
    ],
    "x": 454,
    "y": 3519,
    "w": 1032,
    "h": 82
  },
  {
    "id": "57833b8882f2f3f0",
    "type": "catch",
    "z": "2365e16185f43e03",
    "g": "29799cbbbafa3ded",
    "name": "catch error",
    "scope": null,
    "uncaught": false,
    "x": 620,
    "y": 60,
    "wires": [
      [
        "a07c3bb746445ea8"
      ]
    ]
  },
  {
    "id": "a07c3bb746445ea8",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "29799cbbbafa3ded",
    "name": "topic",
    "rules": [
      {
        "t": "set",
        "p": "topic",
        "pt": "msg",
        "to": "scenes",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 790,
    "y": 60,
    "wires": [
      [
        "65f60f513ebfb4ec"
      ]
    ]
  },
  {
    "id": "65f60f513ebfb4ec",
    "type": "link out",
    "z": "2365e16185f43e03",
    "g": "29799cbbbafa3ded",
    "name": "catch error",
    "mode": "link",
    "links": [
      "a52f0e788cd4dca3"
    ],
    "x": 915,
    "y": 60,
    "wires": []
  },
  {
    "id": "a1054d58b95dbc48",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "391ec7c03beaed05",
    "name": "bucket",
    "rules": [
      {
        "t": "set",
        "p": "bucket",
        "pt": "msg",
        "to": "scenes",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "bucket",
        "pt": "flow",
        "to": "bucket",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 270,
    "y": 60,
    "wires": [
      [
        "d92386370d84c100"
      ]
    ]
  },
  {
    "id": "85ebc176bf8b3f38",
    "type": "link in",
    "z": "2365e16185f43e03",
    "g": "391ec7c03beaed05",
    "name": "scenes - bucket",
    "links": [
      "25445f5a9b787a0a"
    ],
    "x": 135,
    "y": 60,
    "wires": [
      [
        "a1054d58b95dbc48"
      ]
    ]
  },
  {
    "id": "d92386370d84c100",
    "type": "link out",
    "z": "2365e16185f43e03",
    "g": "391ec7c03beaed05",
    "name": "scenes - bucket",
    "mode": "link",
    "links": [
      "ee01b93bd48330c2",
      "3214c7c1cc0f2f6f",
      "3263d6b1a159b0ff"
    ],
    "x": 395,
    "y": 60,
    "wires": []
  },
  {
    "id": "72ffa082cbdc1b9d",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "add.scene.type",
        "pt": "flow",
        "to": "payload",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 750,
    "y": 420,
    "wires": [
      [
        "27e11297c93404a6"
      ]
    ]
  },
  {
    "id": "5a9f6ed4d2782bc6",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "reset",
    "rules": [
      {
        "t": "set",
        "p": "add.scene",
        "pt": "flow",
        "to": "{}",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "add.metrics",
        "pt": "flow",
        "to": "[]",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "scene",
        "pt": "msg",
        "to": "{}",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "remove",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "bucket",
        "pt": "msg"
      },
      {
        "t": "delete",
        "p": "measurement",
        "pt": "msg"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      },
      {
        "t": "delete",
        "p": "options",
        "pt": "msg"
      },
      {
        "t": "delete",
        "p": "type",
        "pt": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1010,
    "y": 240,
    "wires": [
      [
        "8baf78fc5b3a6764",
        "c92344781b6fad03",
        "ab93c45aeece527e",
        "d353d0189ecf7f81",
        "1d722faea8f3efce",
        "019d4edaff49edac",
        "0a3d4794e7dbc8fc",
        "301581685dbc451a",
        "68428fa55c773d0e",
        "48cf2bbb95097f63",
        "18e76789cedf987f",
        "26bd80d9092552c2",
        "444340c4439ad7df",
        "a609d98d8b043604",
        "dcd32241c9d8f9b4",
        "4c457d101747e608",
        "99cc12fec7e55af6",
        "6c7268e12e4ddb66",
        "628815a97e6a49d4",
        "3d22e5ebcc67c6a4",
        "ce6e7ee22c2f80e1",
        "5436202610d4bda0",
        "fdc361fd00366501",
        "080732e991ac90fa",
        "3b307fadcb62da76",
        "bdc3bb4cfb40ad78",
        "dc0df57eb59c0a2c"
      ]
    ]
  },
  {
    "id": "8baf78fc5b3a6764",
    "type": "ui-dropdown",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "group": "86da7af07264458b",
    "name": "scene path (entity)",
    "label": "Chemin de la scène :",
    "tooltip": "",
    "order": 2,
    "width": "6",
    "height": "1",
    "passthru": false,
    "multiple": false,
    "options": [
      {
        "label": "non assigné",
        "value": "",
        "type": "str"
      }
    ],
    "payload": "",
    "topic": "topic",
    "topicType": "msg",
    "className": "",
    "x": 1210,
    "y": 420,
    "wires": [
      [
        "d24a93e61eae3c55"
      ]
    ]
  },
  {
    "id": "c92344781b6fad03",
    "type": "delay",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "",
    "pauseType": "delay",
    "timeout": "100",
    "timeoutUnits": "milliseconds",
    "rate": "1",
    "nbRateUnits": "1",
    "rateUnits": "second",
    "randomFirst": "1",
    "randomLast": "5",
    "randomUnits": "seconds",
    "drop": false,
    "allowrate": false,
    "outputs": 1,
    "x": 1190,
    "y": 300,
    "wires": [
      [
        "db579c1fe924a2c1"
      ]
    ]
  },
  {
    "id": "db579c1fe924a2c1",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 830,
    "y": 360,
    "wires": [
      [
        "dd61619c1c937b10"
      ]
    ]
  },
  {
    "id": "dd61619c1c937b10",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "[\t    {'label':'Eclairage','value':'lighting'},\t    {'label':'Ombrage','value':'shading'},\t    {'label':'Ventilation','value':'airflow'},\t    {'label':'Cumulus','value':'cumulus'},\t    {'label':'Clone','value':'clone'},\t    {'label':'Inverseur','value':'toggle'},\t    {'label':'Spécial couleur','value':'custom color'},\t    {'label':'Spécial niveau','value':'custom level'},\t    {'label':\"Capture d'image\",'value':'snapshot'},\t    {'label':'Thermostat','value':'thermostat'},\t    {'label':'Spécial volume','value':'custom volume'},\t    {'label':'Surcharge','value':'overload'}\t]",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "$sort(msg.options, function($l, $r) {\t  $l[0].label > $r[0].label\t})",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "$append(msg.options,[{'label':'» recharger','value':''}])",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1000,
    "y": 360,
    "wires": [
      [
        "ab93c45aeece527e"
      ]
    ]
  },
  {
    "id": "ab93c45aeece527e",
    "type": "ui-dropdown",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "group": "86da7af07264458b",
    "name": "scene type",
    "label": "Type de scène :",
    "tooltip": "",
    "order": 1,
    "width": "6",
    "height": "1",
    "passthru": false,
    "multiple": false,
    "options": [
      {
        "label": "» recharger",
        "value": "",
        "type": "str"
      }
    ],
    "payload": "",
    "topic": "topic",
    "topicType": "msg",
    "className": "",
    "x": 1190,
    "y": 360,
    "wires": [
      [
        "380eefbfb46f3a27"
      ]
    ]
  },
  {
    "id": "d63fa2d9ced27469",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "c3b6b0792764609a",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]motion",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1010,
    "y": 2060,
    "wires": [
      [
        "748c32f25da38ab8"
      ]
    ]
  },
  {
    "id": "96bab19558d83451",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "c3b6b0792764609a",
    "name": "type",
    "property": "type",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "lighting",
        "vt": "str"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 1,
    "x": 530,
    "y": 2120,
    "wires": [
      [
        "06e646e07d966f1f"
      ]
    ]
  },
  {
    "id": "748c32f25da38ab8",
    "type": "ui-switch",
    "z": "2365e16185f43e03",
    "g": "c3b6b0792764609a",
    "name": "motion",
    "label": "Mouvement",
    "group": "86da7af07264458b",
    "order": 18,
    "width": "6",
    "height": "1",
    "passthru": true,
    "topic": "motion",
    "topicType": "str",
    "style": "",
    "className": "",
    "onvalue": "true",
    "onvalueType": "bool",
    "onicon": "",
    "oncolor": "",
    "offvalue": "false",
    "offvalueType": "bool",
    "officon": "",
    "offcolor": "",
    "x": 1170,
    "y": 2060,
    "wires": [
      [
        "b0d65e1138250625"
      ]
    ]
  },
  {
    "id": "d353d0189ecf7f81",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "false",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "false",
        "tot": "bool"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1010,
    "y": 300,
    "wires": [
      [
        "748c32f25da38ab8",
        "7a1b01a19814bffe",
        "abd5ad5bc01e3c20",
        "955c0f58ef5493c0",
        "9ad653eca9183816",
        "7cea5f900cc829a2",
        "2e2979bb6dcc6553",
        "40bf6c3509b0b82a",
        "5593308d95ecb45d",
        "1c251fd76d55194c"
      ]
    ]
  },
  {
    "id": "1d722faea8f3efce",
    "type": "ui-slider",
    "z": "2365e16185f43e03",
    "g": "c3b6b0792764609a",
    "group": "86da7af07264458b",
    "name": "timer",
    "label": "Minuterie",
    "tooltip": "",
    "order": 13,
    "width": "6",
    "height": "1",
    "passthru": true,
    "outs": "end",
    "topic": "timer",
    "topicType": "str",
    "thumbLabel": "true",
    "showTicks": "false",
    "min": "0",
    "max": "120",
    "step": "5",
    "className": "",
    "iconPrepend": "",
    "iconAppend": "",
    "color": "",
    "colorTrack": "",
    "colorThumb": "",
    "x": 1170,
    "y": 2300,
    "wires": [
      [
        "b0d65e1138250625"
      ]
    ]
  },
  {
    "id": "106e37a95380121b",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "c3b6b0792764609a",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]timer",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1010,
    "y": 2300,
    "wires": [
      [
        "1d722faea8f3efce"
      ]
    ]
  },
  {
    "id": "019d4edaff49edac",
    "type": "ui-slider",
    "z": "2365e16185f43e03",
    "g": "c3b6b0792764609a",
    "group": "86da7af07264458b",
    "name": "high",
    "label": "Eclairage fort",
    "tooltip": "",
    "order": 14,
    "width": "6",
    "height": "1",
    "passthru": true,
    "outs": "end",
    "topic": "high",
    "topicType": "str",
    "thumbLabel": "true",
    "showTicks": "false",
    "min": "0",
    "max": "99",
    "step": "1",
    "className": "",
    "iconPrepend": "",
    "iconAppend": "",
    "color": "",
    "colorTrack": "",
    "colorThumb": "",
    "x": 1170,
    "y": 2360,
    "wires": [
      [
        "b0d65e1138250625"
      ]
    ]
  },
  {
    "id": "72c3e43d1bd7d71e",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "c3b6b0792764609a",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]high",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1010,
    "y": 2360,
    "wires": [
      [
        "019d4edaff49edac"
      ]
    ]
  },
  {
    "id": "0a3d4794e7dbc8fc",
    "type": "ui-slider",
    "z": "2365e16185f43e03",
    "g": "c3b6b0792764609a",
    "group": "86da7af07264458b",
    "name": "low",
    "label": "Eclairage faible",
    "tooltip": "",
    "order": 15,
    "width": "6",
    "height": "1",
    "passthru": true,
    "outs": "end",
    "topic": "low",
    "topicType": "str",
    "thumbLabel": "true",
    "showTicks": "false",
    "min": "0",
    "max": "99",
    "step": "1",
    "className": "",
    "iconPrepend": "",
    "iconAppend": "",
    "color": "",
    "colorTrack": "",
    "colorThumb": "",
    "x": 1170,
    "y": 2420,
    "wires": [
      [
        "b0d65e1138250625"
      ]
    ]
  },
  {
    "id": "d0562d12417ddbcd",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "c3b6b0792764609a",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]low",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1010,
    "y": 2420,
    "wires": [
      [
        "0a3d4794e7dbc8fc"
      ]
    ]
  },
  {
    "id": "a61a9ab22c564e7c",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "c3b6b0792764609a",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]nocturnal",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1010,
    "y": 2120,
    "wires": [
      [
        "7a1b01a19814bffe"
      ]
    ]
  },
  {
    "id": "7a1b01a19814bffe",
    "type": "ui-switch",
    "z": "2365e16185f43e03",
    "g": "c3b6b0792764609a",
    "name": "nocturnal",
    "label": "Nocturne",
    "group": "86da7af07264458b",
    "order": 19,
    "width": "6",
    "height": "1",
    "passthru": true,
    "topic": "nocturnal",
    "topicType": "str",
    "style": "",
    "className": "",
    "onvalue": "true",
    "onvalueType": "bool",
    "onicon": "",
    "oncolor": "",
    "offvalue": "false",
    "offvalueType": "bool",
    "officon": "",
    "offcolor": "",
    "x": 1180,
    "y": 2120,
    "wires": [
      [
        "b0d65e1138250625"
      ]
    ]
  },
  {
    "id": "a3749ef3434a4a01",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "c3b6b0792764609a",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]nightlight",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1010,
    "y": 2180,
    "wires": [
      [
        "abd5ad5bc01e3c20"
      ]
    ]
  },
  {
    "id": "abd5ad5bc01e3c20",
    "type": "ui-switch",
    "z": "2365e16185f43e03",
    "g": "c3b6b0792764609a",
    "name": "nightlight",
    "label": "Veilleuse",
    "group": "86da7af07264458b",
    "order": 20,
    "width": "6",
    "height": "1",
    "passthru": true,
    "topic": "nightlight",
    "topicType": "str",
    "style": "",
    "className": "",
    "onvalue": "true",
    "onvalueType": "bool",
    "onicon": "",
    "oncolor": "",
    "offvalue": "false",
    "offvalueType": "bool",
    "officon": "",
    "offcolor": "",
    "x": 1180,
    "y": 2180,
    "wires": [
      [
        "b0d65e1138250625"
      ]
    ]
  },
  {
    "id": "f978ae555f7467c1",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "c3b6b0792764609a",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]luminosity",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1010,
    "y": 2480,
    "wires": [
      [
        "301581685dbc451a"
      ]
    ]
  },
  {
    "id": "301581685dbc451a",
    "type": "ui-slider",
    "z": "2365e16185f43e03",
    "g": "c3b6b0792764609a",
    "group": "86da7af07264458b",
    "name": "luminosity",
    "label": "Luminosité",
    "tooltip": "",
    "order": 16,
    "width": "6",
    "height": "1",
    "passthru": true,
    "outs": "end",
    "topic": "luminosity",
    "topicType": "str",
    "thumbLabel": "true",
    "showTicks": "false",
    "min": "0",
    "max": "2500",
    "step": "100",
    "className": "",
    "iconPrepend": "",
    "iconAppend": "",
    "color": "",
    "colorTrack": "",
    "colorThumb": "",
    "x": 1180,
    "y": 2480,
    "wires": [
      [
        "b0d65e1138250625"
      ]
    ]
  },
  {
    "id": "f5ad10239eb3cfc3",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "c3b6b0792764609a",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]darkness",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1010,
    "y": 2540,
    "wires": [
      [
        "68428fa55c773d0e"
      ]
    ]
  },
  {
    "id": "68428fa55c773d0e",
    "type": "ui-slider",
    "z": "2365e16185f43e03",
    "g": "c3b6b0792764609a",
    "group": "86da7af07264458b",
    "name": "darkness",
    "label": "Obscurité",
    "tooltip": "",
    "order": 17,
    "width": "6",
    "height": "1",
    "passthru": true,
    "outs": "end",
    "topic": "darkness",
    "topicType": "str",
    "thumbLabel": "true",
    "showTicks": "false",
    "min": "0",
    "max": "500",
    "step": "10",
    "className": "",
    "iconPrepend": "",
    "iconAppend": "",
    "color": "",
    "colorTrack": "",
    "colorThumb": "",
    "x": 1180,
    "y": 2540,
    "wires": [
      [
        "b0d65e1138250625"
      ]
    ]
  },
  {
    "id": "48cf2bbb95097f63",
    "type": "ui-button",
    "z": "2365e16185f43e03",
    "g": "0d183185e153399c",
    "group": "86da7af07264458b",
    "name": "add",
    "label": "",
    "order": 35,
    "width": "6",
    "height": "1",
    "emulateClick": false,
    "tooltip": "",
    "color": "",
    "bgcolor": "",
    "className": "",
    "icon": "plus",
    "iconPosition": "left",
    "payload": "",
    "payloadType": "str",
    "topic": "topic",
    "topicType": "msg",
    "x": 1170,
    "y": 1220,
    "wires": [
      [
        "ee26946f7325dc17"
      ]
    ]
  },
  {
    "id": "ee26946f7325dc17",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "0d183185e153399c",
    "name": "to global",
    "rules": [
      {
        "t": "set",
        "p": "scene",
        "pt": "msg",
        "to": "add.scene",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "scenes[msg.scene.type][msg.scene.path]",
        "pt": "global",
        "to": "scene",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1340,
    "y": 1220,
    "wires": [
      [
        "8419fa139418385a"
      ]
    ]
  },
  {
    "id": "8419fa139418385a",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "0d183185e153399c",
    "name": "set notification metric",
    "rules": [
      {
        "t": "set",
        "p": "bucket",
        "pt": "msg",
        "to": "system",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "measurement",
        "pt": "msg",
        "to": "notification",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "field",
        "pt": "msg",
        "to": "message",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "Scène ajouté",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "repeat",
        "pt": "msg",
        "to": "true",
        "tot": "bool"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1560,
    "y": 1220,
    "wires": [
      [
        "43166899a8759ba8",
        "d0b1eeb6835b62fc"
      ]
    ]
  },
  {
    "id": "d0b1eeb6835b62fc",
    "type": "debug",
    "z": "2365e16185f43e03",
    "g": "0d183185e153399c",
    "name": "scenes - add scene",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "scene",
    "targetType": "msg",
    "statusVal": "",
    "statusType": "auto",
    "x": 1810,
    "y": 1220,
    "wires": []
  },
  {
    "id": "43166899a8759ba8",
    "type": "link out",
    "z": "2365e16185f43e03",
    "g": "0d183185e153399c",
    "name": "scenes - add scene",
    "mode": "link",
    "links": [
      "206c1fb4a48067df",
      "251f1801fba21ab0",
      "d2ca5cbd23e2cf88",
      "9c3c4a7cb6430948",
      "3214c7c1cc0f2f6f"
    ],
    "x": 1735,
    "y": 1280,
    "wires": []
  },
  {
    "id": "251f1801fba21ab0",
    "type": "link in",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "scenes - add scene",
    "links": [
      "43166899a8759ba8",
      "8d98777b03b2341f",
      "d7f64b57a1fb0517",
      "9635cf6ffe5f5df1"
    ],
    "x": 875,
    "y": 240,
    "wires": [
      [
        "5a9f6ed4d2782bc6"
      ]
    ]
  },
  {
    "id": "06e646e07d966f1f",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "c3b6b0792764609a",
    "name": "class",
    "rules": [
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "add.scene.motion",
        "pt": "flow",
        "to": "false",
        "tot": "bool"
      },
      {
        "t": "set",
        "p": "add.scene.nocturnal",
        "pt": "flow",
        "to": "false",
        "tot": "bool"
      },
      {
        "t": "set",
        "p": "add.scene.nightlight",
        "pt": "flow",
        "to": "false",
        "tot": "bool"
      },
      {
        "t": "set",
        "p": "add.scene.retention",
        "pt": "flow",
        "to": "false",
        "tot": "bool"
      },
      {
        "t": "set",
        "p": "add.scene.timer",
        "pt": "flow",
        "to": "0",
        "tot": "num"
      },
      {
        "t": "set",
        "p": "add.scene.high",
        "pt": "flow",
        "to": "40",
        "tot": "num"
      },
      {
        "t": "set",
        "p": "add.scene.low",
        "pt": "flow",
        "to": "0",
        "tot": "num"
      },
      {
        "t": "set",
        "p": "add.scene.luminosity",
        "pt": "flow",
        "to": "0",
        "tot": "num"
      },
      {
        "t": "set",
        "p": "add.scene.darkness",
        "pt": "flow",
        "to": "0",
        "tot": "num"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 690,
    "y": 2120,
    "wires": [
      [
        "d63fa2d9ced27469",
        "a61a9ab22c564e7c",
        "a3749ef3434a4a01",
        "106e37a95380121b",
        "f978ae555f7467c1",
        "f5ad10239eb3cfc3",
        "3b1b60fd4fe7a75d",
        "3b26932b59001243"
      ]
    ]
  },
  {
    "id": "c715b34bd8c7144e",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "reset",
    "rules": [
      {
        "t": "set",
        "p": "add.trigger",
        "pt": "flow",
        "to": "{}",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "add.buckets",
        "pt": "flow",
        "to": "[]",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "add.measurements",
        "pt": "flow",
        "to": "[]",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "add.fields",
        "pt": "flow",
        "to": "[]",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "add.types",
        "pt": "flow",
        "to": "[]",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "add.paths",
        "pt": "flow",
        "to": "[]",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "remove",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "bucket",
        "pt": "msg"
      },
      {
        "t": "delete",
        "p": "measurement",
        "pt": "msg"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      },
      {
        "t": "delete",
        "p": "options",
        "pt": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1730,
    "y": 5020,
    "wires": [
      [
        "852b5a25f14c20c6",
        "acf663c8932fb635",
        "6a28b7fcc76e5423",
        "284a076d451ace1d",
        "75cebf8401b56f16",
        "9790caaee9c5957b",
        "357a49acee942fd1",
        "13da4488e5901405",
        "c98c47082b028dd0",
        "eae0eb6cb3648279",
        "16438bfdddf3750d",
        "33daf357f466a619",
        "fc63cc48fc705844",
        "33023e6e1a555bef"
      ]
    ]
  },
  {
    "id": "acf663c8932fb635",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "false",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "false",
        "tot": "bool"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1730,
    "y": 4960,
    "wires": [
      [
        "2accc11944283ad8",
        "f3b0e08392296b29"
      ]
    ]
  },
  {
    "id": "852b5a25f14c20c6",
    "type": "delay",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "",
    "pauseType": "delay",
    "timeout": "100",
    "timeoutUnits": "milliseconds",
    "rate": "1",
    "nbRateUnits": "1",
    "rateUnits": "second",
    "randomFirst": "1",
    "randomLast": "5",
    "randomUnits": "seconds",
    "drop": false,
    "allowrate": false,
    "outputs": 1,
    "x": 1910,
    "y": 5020,
    "wires": [
      [
        "c0d3cb23c9507a3b"
      ]
    ]
  },
  {
    "id": "2cc720203fa29afe",
    "type": "link in",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "scene - add trigger",
    "links": [
      "d32dc8a93d1ac3ad",
      "8d98777b03b2341f",
      "a21488eb16a467fa",
      "30b864529ddd7036"
    ],
    "x": 1595,
    "y": 5020,
    "wires": [
      [
        "c715b34bd8c7144e"
      ]
    ]
  },
  {
    "id": "c0d3cb23c9507a3b",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "metrics",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 150,
    "y": 5100,
    "wires": [
      [
        "d29ab01e7feb7c8a"
      ]
    ]
  },
  {
    "id": "d29ab01e7feb7c8a",
    "type": "split",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "bucket",
    "splt": "\\n",
    "spltType": "str",
    "arraySplt": 1,
    "arraySpltType": "len",
    "stream": false,
    "addname": "bucket",
    "x": 310,
    "y": 5160,
    "wires": [
      [
        "52995e16ab89a506"
      ]
    ]
  },
  {
    "id": "74a4ed4dc627a311",
    "type": "join",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "",
    "mode": "auto",
    "build": "string",
    "property": "payload",
    "propertyType": "msg",
    "key": "topic",
    "joiner": "\\n",
    "joinerType": "str",
    "accumulate": false,
    "timeout": "",
    "count": "",
    "reduceRight": false,
    "reduceExp": "",
    "reduceInit": "",
    "reduceInitType": "",
    "reduceFixup": "",
    "x": 1550,
    "y": 5140,
    "wires": [
      [
        "70e8540a9e38ea1b"
      ]
    ]
  },
  {
    "id": "70e8540a9e38ea1b",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "add.buckets",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "$sort(msg.options, function($l, $r) {\t  $l[0].label > $r[0].label\t})",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "$append(msg.options,[{'label':'» recharger','value':''}])",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1720,
    "y": 5140,
    "wires": [
      [
        "6a28b7fcc76e5423"
      ]
    ]
  },
  {
    "id": "6a28b7fcc76e5423",
    "type": "ui-dropdown",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "group": "eeb78a0cec96cfe6",
    "name": "bucket",
    "label": "Pièce du déclencheur :",
    "tooltip": "",
    "order": 1,
    "width": "6",
    "height": "1",
    "passthru": false,
    "multiple": false,
    "options": [
      {
        "label": "» recharger",
        "value": "",
        "type": "str"
      }
    ],
    "payload": "",
    "topic": "topic",
    "topicType": "msg",
    "className": "",
    "x": 1890,
    "y": 5140,
    "wires": [
      [
        "94f92b94173718ae"
      ]
    ]
  },
  {
    "id": "52995e16ab89a506",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "limit bucket",
    "property": "bucket",
    "propertyType": "msg",
    "rules": [
      {
        "t": "regex",
        "v": "room$",
        "vt": "str",
        "case": false
      },
      {
        "t": "else"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 2,
    "x": 490,
    "y": 5160,
    "wires": [
      [
        "74a4ed4dc627a311"
      ],
      [
        "18abfea89e3b41b7"
      ]
    ]
  },
  {
    "id": "18abfea89e3b41b7",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "add",
    "rules": [
      {
        "t": "set",
        "p": "current",
        "pt": "msg",
        "to": "{\t    \"label\":msg.bucket,\t    \"value\":msg.bucket\t    }",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "currents",
        "pt": "msg",
        "to": "add.buckets",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "add.buckets",
        "pt": "flow",
        "to": "$append(msg.currents,msg.current)",
        "tot": "jsonata"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 670,
    "y": 5100,
    "wires": [
      [
        "74a4ed4dc627a311"
      ]
    ]
  },
  {
    "id": "bab19150c0c5380a",
    "type": "split",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "measurement",
    "splt": "\\n",
    "spltType": "str",
    "arraySplt": 1,
    "arraySpltType": "len",
    "stream": false,
    "addname": "measurement",
    "x": 340,
    "y": 5280,
    "wires": [
      [
        "a8104e49d5de21fc"
      ]
    ]
  },
  {
    "id": "a808a0b1094b6686",
    "type": "join",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "",
    "mode": "auto",
    "build": "string",
    "property": "payload",
    "propertyType": "msg",
    "key": "topic",
    "joiner": "\\n",
    "joinerType": "str",
    "accumulate": false,
    "timeout": "",
    "count": "",
    "reduceRight": false,
    "reduceExp": "",
    "reduceInit": "",
    "reduceInitType": "",
    "reduceFixup": "",
    "x": 1550,
    "y": 5260,
    "wires": [
      [
        "92b4cb9321db429e"
      ]
    ]
  },
  {
    "id": "92b4cb9321db429e",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "add.measurements",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "$sort(msg.options, function($l, $r) {\t  $l[0].label > $r[0].label\t})",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1720,
    "y": 5260,
    "wires": [
      [
        "284a076d451ace1d"
      ]
    ]
  },
  {
    "id": "284a076d451ace1d",
    "type": "ui-dropdown",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "group": "eeb78a0cec96cfe6",
    "name": "measurement",
    "label": "Mesure du déclencheur :",
    "tooltip": "",
    "order": 2,
    "width": "6",
    "height": "1",
    "passthru": false,
    "multiple": false,
    "options": [
      {
        "label": "non assigné",
        "value": "",
        "type": "str"
      }
    ],
    "payload": "",
    "topic": "topic",
    "topicType": "msg",
    "className": "",
    "x": 1920,
    "y": 5260,
    "wires": [
      [
        "609602a97afb8342"
      ]
    ]
  },
  {
    "id": "a8104e49d5de21fc",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "limit measurement",
    "property": "measurement",
    "propertyType": "msg",
    "rules": [
      {
        "t": "regex",
        "v": "config$",
        "vt": "str",
        "case": false
      },
      {
        "t": "else"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 2,
    "x": 570,
    "y": 5280,
    "wires": [
      [
        "a808a0b1094b6686"
      ],
      [
        "e44628f535d5b1cb"
      ]
    ]
  },
  {
    "id": "0f613980bbb88aec",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "add",
    "rules": [
      {
        "t": "set",
        "p": "current",
        "pt": "msg",
        "to": "{\t    \"label\":msg.trans,\t    \"value\":msg.measurement\t    }",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "currents",
        "pt": "msg",
        "to": "add.measurements",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "add.measurements",
        "pt": "flow",
        "to": "$append(msg.currents,msg.current)",
        "tot": "jsonata"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1150,
    "y": 5220,
    "wires": [
      [
        "a808a0b1094b6686"
      ]
    ]
  },
  {
    "id": "7e331b1381065059",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "add.bucket",
        "pt": "flow",
        "to": "payload",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "metrics[msg.payload]",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 150,
    "y": 5220,
    "wires": [
      [
        "bab19150c0c5380a"
      ]
    ]
  },
  {
    "id": "e44628f535d5b1cb",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "move",
    "rules": [
      {
        "t": "set",
        "p": "field",
        "pt": "msg",
        "to": "measurement",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 770,
    "y": 5220,
    "wires": [
      [
        "aeb2a0a395a07f56"
      ]
    ]
  },
  {
    "id": "aeb2a0a395a07f56",
    "type": "link call",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "",
    "links": [
      "df0e4ab2e1efc286"
    ],
    "linkType": "static",
    "timeout": "30",
    "x": 960,
    "y": 5220,
    "wires": [
      [
        "0f613980bbb88aec"
      ]
    ]
  },
  {
    "id": "2ad50ca6f102ad06",
    "type": "split",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "field",
    "splt": "\\n",
    "spltType": "str",
    "arraySplt": 1,
    "arraySpltType": "len",
    "stream": false,
    "addname": "field",
    "x": 310,
    "y": 5400,
    "wires": [
      [
        "ef40f0f28d4b23a0"
      ]
    ]
  },
  {
    "id": "be4e8eb0027dcf54",
    "type": "join",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "",
    "mode": "auto",
    "build": "string",
    "property": "payload",
    "propertyType": "msg",
    "key": "topic",
    "joiner": "\\n",
    "joinerType": "str",
    "accumulate": false,
    "timeout": "",
    "count": "",
    "reduceRight": false,
    "reduceExp": "",
    "reduceInit": "",
    "reduceInitType": "",
    "reduceFixup": "",
    "x": 1550,
    "y": 5380,
    "wires": [
      [
        "8012222b2d1c8511"
      ]
    ]
  },
  {
    "id": "8012222b2d1c8511",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "add.fields",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "$sort(msg.options, function($l, $r) {\t  $l[0].label > $r[0].label\t})",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1720,
    "y": 5380,
    "wires": [
      [
        "75cebf8401b56f16"
      ]
    ]
  },
  {
    "id": "75cebf8401b56f16",
    "type": "ui-dropdown",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "group": "eeb78a0cec96cfe6",
    "name": "field",
    "label": "Champs du déclencheur :",
    "tooltip": "",
    "order": 3,
    "width": "6",
    "height": "1",
    "passthru": false,
    "multiple": false,
    "options": [
      {
        "label": "non assigné",
        "value": "",
        "type": "str"
      }
    ],
    "payload": "",
    "topic": "topic",
    "topicType": "msg",
    "className": "",
    "x": 1890,
    "y": 5380,
    "wires": [
      [
        "264193b117c3f150"
      ]
    ]
  },
  {
    "id": "ef40f0f28d4b23a0",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "limit field",
    "property": "field",
    "propertyType": "msg",
    "rules": [
      {
        "t": "regex",
        "v": "response$",
        "vt": "str",
        "case": false
      },
      {
        "t": "else"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 2,
    "x": 480,
    "y": 5400,
    "wires": [
      [
        "be4e8eb0027dcf54"
      ],
      [
        "dfe33f11952c084b"
      ]
    ]
  },
  {
    "id": "92d3382419ded8c9",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "add",
    "rules": [
      {
        "t": "set",
        "p": "current",
        "pt": "msg",
        "to": "{\t    \"label\":msg.trans,\t    \"value\":msg.field\t    }",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "currents",
        "pt": "msg",
        "to": "add.fields",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "add.fields",
        "pt": "flow",
        "to": "$append(msg.currents,msg.current)",
        "tot": "jsonata"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 870,
    "y": 5340,
    "wires": [
      [
        "be4e8eb0027dcf54"
      ]
    ]
  },
  {
    "id": "609602a97afb8342",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "add.measurement",
        "pt": "flow",
        "to": "payload",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "bucket",
        "pt": "msg",
        "to": "add.bucket",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "metrics[msg.bucket][msg.payload]",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 150,
    "y": 5340,
    "wires": [
      [
        "2ad50ca6f102ad06"
      ]
    ]
  },
  {
    "id": "dfe33f11952c084b",
    "type": "link call",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "",
    "links": [
      "df0e4ab2e1efc286"
    ],
    "linkType": "static",
    "timeout": "30",
    "x": 680,
    "y": 5340,
    "wires": [
      [
        "92d3382419ded8c9"
      ]
    ]
  },
  {
    "id": "460ba30d5c96b8cc",
    "type": "split",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "type",
    "splt": "\\n",
    "spltType": "str",
    "arraySplt": 1,
    "arraySpltType": "len",
    "stream": false,
    "addname": "type",
    "x": 310,
    "y": 5460,
    "wires": [
      [
        "534f26b628d7ca3c"
      ]
    ]
  },
  {
    "id": "b4448524cdeff7e5",
    "type": "join",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "",
    "mode": "auto",
    "build": "string",
    "property": "payload",
    "propertyType": "msg",
    "key": "topic",
    "joiner": "\\n",
    "joinerType": "str",
    "accumulate": false,
    "timeout": "",
    "count": "",
    "reduceRight": false,
    "reduceExp": "",
    "reduceInit": "",
    "reduceInitType": "",
    "reduceFixup": "",
    "x": 1550,
    "y": 5460,
    "wires": [
      [
        "80a0e335e884b052"
      ]
    ]
  },
  {
    "id": "80a0e335e884b052",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "add.types",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "$sort(msg.options, function($l, $r) {\t  $l[0].label > $r[0].label\t})",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1720,
    "y": 5460,
    "wires": [
      [
        "9790caaee9c5957b"
      ]
    ]
  },
  {
    "id": "9790caaee9c5957b",
    "type": "ui-dropdown",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "group": "eeb78a0cec96cfe6",
    "name": "type",
    "label": "Type de la scène :",
    "tooltip": "",
    "order": 4,
    "width": "6",
    "height": "1",
    "passthru": false,
    "multiple": false,
    "options": [
      {
        "label": "non assigné",
        "value": "",
        "type": "str"
      }
    ],
    "payload": "",
    "topic": "topic",
    "topicType": "msg",
    "className": "",
    "x": 1890,
    "y": 5460,
    "wires": [
      [
        "d72e4ee0d2b4084d"
      ]
    ]
  },
  {
    "id": "12b058f0dc39a192",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "add",
    "rules": [
      {
        "t": "set",
        "p": "current",
        "pt": "msg",
        "to": "{\t    \"label\":msg.trans,\t    \"value\":msg.type\t    }",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "currents",
        "pt": "msg",
        "to": "add.types",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "add.types",
        "pt": "flow",
        "to": "$append(msg.currents,msg.current)",
        "tot": "jsonata"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 850,
    "y": 5460,
    "wires": [
      [
        "b4448524cdeff7e5"
      ]
    ]
  },
  {
    "id": "264193b117c3f150",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "add.field",
        "pt": "flow",
        "to": "payload",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 150,
    "y": 5460,
    "wires": [
      [
        "460ba30d5c96b8cc"
      ]
    ]
  },
  {
    "id": "adab55e820cad54d",
    "type": "link call",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "",
    "links": [
      "df0e4ab2e1efc286"
    ],
    "linkType": "static",
    "timeout": "30",
    "x": 660,
    "y": 5460,
    "wires": [
      [
        "12b058f0dc39a192"
      ]
    ]
  },
  {
    "id": "534f26b628d7ca3c",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "move",
    "rules": [
      {
        "t": "set",
        "p": "field",
        "pt": "msg",
        "to": "type",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 470,
    "y": 5460,
    "wires": [
      [
        "adab55e820cad54d"
      ]
    ]
  },
  {
    "id": "d72e4ee0d2b4084d",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "add.trigger.type",
        "pt": "flow",
        "to": "payload",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "type",
        "pt": "msg",
        "to": "payload",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.payload]",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 150,
    "y": 5520,
    "wires": [
      [
        "502addd457658917"
      ]
    ]
  },
  {
    "id": "502addd457658917",
    "type": "split",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "path",
    "splt": "\\n",
    "spltType": "str",
    "arraySplt": 1,
    "arraySpltType": "len",
    "stream": false,
    "addname": "path",
    "x": 310,
    "y": 5520,
    "wires": [
      [
        "7044da8f08b09895"
      ]
    ]
  },
  {
    "id": "210ef3304012897f",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "add",
    "rules": [
      {
        "t": "set",
        "p": "metric",
        "pt": "msg",
        "to": "{\t    \"label\":msg.bucket&' / '&msg.trans_measurement&' / '&msg.trans,\t    \"value\":msg.path\t    }",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "metrics",
        "pt": "msg",
        "to": "add.paths",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "add.paths",
        "pt": "flow",
        "to": "$append(msg.metrics,msg.metric)",
        "tot": "jsonata"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1390,
    "y": 5520,
    "wires": [
      [
        "61282a89cda06158"
      ]
    ]
  },
  {
    "id": "6f93c6bcc4a65c4d",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "add.paths",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "$sort(msg.options, function($l, $r) {\t  $l[0].label > $r[0].label\t})",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1720,
    "y": 5520,
    "wires": [
      [
        "357a49acee942fd1"
      ]
    ]
  },
  {
    "id": "357a49acee942fd1",
    "type": "ui-dropdown",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "group": "eeb78a0cec96cfe6",
    "name": "path",
    "label": "Entité de la scène :",
    "tooltip": "",
    "order": 5,
    "width": "6",
    "height": "1",
    "passthru": false,
    "multiple": false,
    "options": [
      {
        "label": "non assigné",
        "value": "",
        "type": "str"
      }
    ],
    "payload": "",
    "topic": "topic",
    "topicType": "msg",
    "className": "",
    "x": 1890,
    "y": 5520,
    "wires": [
      [
        "242995af11794e53"
      ]
    ]
  },
  {
    "id": "61282a89cda06158",
    "type": "join",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "",
    "mode": "auto",
    "build": "string",
    "property": "payload",
    "propertyType": "msg",
    "key": "topic",
    "joiner": "\\n",
    "joinerType": "str",
    "accumulate": false,
    "timeout": "",
    "count": "",
    "reduceRight": false,
    "reduceExp": "",
    "reduceInit": "",
    "reduceInitType": "",
    "reduceFixup": "",
    "x": 1550,
    "y": 5520,
    "wires": [
      [
        "6f93c6bcc4a65c4d"
      ]
    ]
  },
  {
    "id": "964d600b050df4fc",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "move",
    "rules": [
      {
        "t": "set",
        "p": "old_field",
        "pt": "msg",
        "to": "field",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "field",
        "pt": "msg",
        "to": "measurement",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 630,
    "y": 5520,
    "wires": [
      [
        "5d3298bda1ca0932"
      ]
    ]
  },
  {
    "id": "5d3298bda1ca0932",
    "type": "link call",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "",
    "links": [
      "df0e4ab2e1efc286"
    ],
    "linkType": "static",
    "timeout": "30",
    "x": 820,
    "y": 5520,
    "wires": [
      [
        "f8749556560c8526"
      ]
    ]
  },
  {
    "id": "f8749556560c8526",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "move",
    "rules": [
      {
        "t": "set",
        "p": "trans_measurement",
        "pt": "msg",
        "to": "trans",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "field",
        "pt": "msg",
        "to": "old_field",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1010,
    "y": 5520,
    "wires": [
      [
        "3bbe844fffdf20ed"
      ]
    ]
  },
  {
    "id": "3bbe844fffdf20ed",
    "type": "link call",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "",
    "links": [
      "df0e4ab2e1efc286"
    ],
    "linkType": "static",
    "timeout": "30",
    "x": 1200,
    "y": 5520,
    "wires": [
      [
        "210ef3304012897f"
      ]
    ]
  },
  {
    "id": "7044da8f08b09895",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "split",
    "rules": [
      {
        "t": "set",
        "p": "tmp",
        "pt": "msg",
        "to": "$split(msg.path,'/')",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "bucket",
        "pt": "msg",
        "to": "tmp[0]",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "measurement",
        "pt": "msg",
        "to": "tmp[1]",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "field",
        "pt": "msg",
        "to": "tmp[2]",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 470,
    "y": 5520,
    "wires": [
      [
        "964d600b050df4fc"
      ]
    ]
  },
  {
    "id": "242995af11794e53",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "add.trigger.path",
        "pt": "flow",
        "to": "payload",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 150,
    "y": 5580,
    "wires": [
      [
        "9c9c71c664eee075"
      ]
    ]
  },
  {
    "id": "1870deac817325e5",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "cleanup",
    "rules": [
      {
        "t": "set",
        "p": "bucket",
        "pt": "msg",
        "to": "add.bucket",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "measurement",
        "pt": "msg",
        "to": "add.measurement",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "field",
        "pt": "msg",
        "to": "add.field",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "add.trigger.trigger",
        "pt": "flow",
        "to": "msg.bucket&'/'&msg.measurement&'/'&msg.field",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "add.trigger",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "md5",
        "pt": "msg",
        "to": "payload",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 2060,
    "y": 6180,
    "wires": [
      [
        "c640900fa4f67a47"
      ]
    ]
  },
  {
    "id": "13da4488e5901405",
    "type": "ui-dropdown",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "group": "eeb78a0cec96cfe6",
    "name": "on type",
    "label": "Type de niveau haut :",
    "tooltip": "",
    "order": 6,
    "width": "6",
    "height": "1",
    "passthru": false,
    "multiple": false,
    "options": [
      {
        "label": "Aucun",
        "value": "",
        "type": "str"
      },
      {
        "label": "Booléen",
        "value": "boolean",
        "type": "str"
      },
      {
        "label": "Nombre",
        "value": "number",
        "type": "str"
      },
      {
        "label": "Texte",
        "value": "text",
        "type": "str"
      }
    ],
    "payload": "",
    "topic": "topic",
    "topicType": "msg",
    "className": "",
    "x": 1900,
    "y": 5580,
    "wires": [
      [
        "6a1a8f3a27e993b3"
      ]
    ]
  },
  {
    "id": "6a1a8f3a27e993b3",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "on type",
    "property": "payload",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "",
        "vt": "str"
      },
      {
        "t": "eq",
        "v": "boolean",
        "vt": "str"
      },
      {
        "t": "eq",
        "v": "number",
        "vt": "str"
      },
      {
        "t": "eq",
        "v": "text",
        "vt": "str"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 4,
    "x": 1560,
    "y": 5640,
    "wires": [
      [
        "52a7726c278388da"
      ],
      [
        "f2369a7f542517f2"
      ],
      [
        "3f26dd11ba94f7c0"
      ],
      [
        "3b9bcd70499a72a7"
      ]
    ]
  },
  {
    "id": "2accc11944283ad8",
    "type": "ui-switch",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "on boolean",
    "label": "Niveau haut",
    "group": "eeb78a0cec96cfe6",
    "order": 7,
    "width": "6",
    "height": "1",
    "passthru": false,
    "topic": "topic",
    "topicType": "msg",
    "style": "",
    "className": "",
    "onvalue": "true",
    "onvalueType": "bool",
    "onicon": "",
    "oncolor": "",
    "offvalue": "false",
    "offvalueType": "bool",
    "officon": "",
    "offcolor": "",
    "x": 1910,
    "y": 5700,
    "wires": [
      [
        "77b5fcb42cefbcf7"
      ]
    ]
  },
  {
    "id": "c98c47082b028dd0",
    "type": "ui-slider",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "group": "eeb78a0cec96cfe6",
    "name": "on number",
    "label": "Niveau haut",
    "tooltip": "",
    "order": 8,
    "width": "6",
    "height": "1",
    "passthru": false,
    "outs": "end",
    "topic": "topic",
    "topicType": "msg",
    "thumbLabel": true,
    "min": 0,
    "max": "99",
    "step": 1,
    "className": "",
    "x": 1910,
    "y": 5760,
    "wires": [
      [
        "77b5fcb42cefbcf7"
      ]
    ]
  },
  {
    "id": "eae0eb6cb3648279",
    "type": "ui-text-input",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "group": "eeb78a0cec96cfe6",
    "name": "on text",
    "label": "Niveau haut",
    "order": 9,
    "width": "6",
    "height": "1",
    "topic": "topic",
    "topicType": "msg",
    "mode": "text",
    "delay": 300,
    "passthru": false,
    "sendOnDelay": false,
    "sendOnBlur": true,
    "sendOnEnter": true,
    "className": "",
    "x": 1890,
    "y": 5820,
    "wires": [
      [
        "77b5fcb42cefbcf7"
      ]
    ]
  },
  {
    "id": "77b5fcb42cefbcf7",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "add.trigger.on",
        "pt": "flow",
        "to": "payload",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 2090,
    "y": 5700,
    "wires": [
      [
        "52a7726c278388da"
      ]
    ]
  },
  {
    "id": "52a7726c278388da",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "...",
    "rules": [],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 2250,
    "y": 5640,
    "wires": [
      [
        "af55e037ae50391e"
      ]
    ]
  },
  {
    "id": "16438bfdddf3750d",
    "type": "ui-dropdown",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "group": "eeb78a0cec96cfe6",
    "name": "off type",
    "label": "Type de niveau bas :",
    "tooltip": "",
    "order": 10,
    "width": "6",
    "height": "1",
    "passthru": false,
    "multiple": false,
    "options": [
      {
        "label": "Aucun",
        "value": "",
        "type": "str"
      },
      {
        "label": "Booléen",
        "value": "boolean",
        "type": "str"
      },
      {
        "label": "Nombre",
        "value": "number",
        "type": "str"
      },
      {
        "label": "Texte",
        "value": "text",
        "type": "str"
      }
    ],
    "payload": "",
    "topic": "topic",
    "topicType": "msg",
    "className": "",
    "x": 1900,
    "y": 5880,
    "wires": [
      [
        "8dc9910ee0b4af8a"
      ]
    ]
  },
  {
    "id": "8dc9910ee0b4af8a",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "off type",
    "property": "payload",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "",
        "vt": "str"
      },
      {
        "t": "eq",
        "v": "boolean",
        "vt": "str"
      },
      {
        "t": "eq",
        "v": "number",
        "vt": "str"
      },
      {
        "t": "eq",
        "v": "text",
        "vt": "str"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 4,
    "x": 1560,
    "y": 5940,
    "wires": [
      [
        "dc8e1ea48d3d1380"
      ],
      [
        "2b5138253f338bd9"
      ],
      [
        "ee9f0a9d9f5bfded"
      ],
      [
        "9555f3b85c4c0239"
      ]
    ]
  },
  {
    "id": "f3b0e08392296b29",
    "type": "ui-switch",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "off boolean",
    "label": "Niveau bas",
    "group": "eeb78a0cec96cfe6",
    "order": 11,
    "width": "6",
    "height": "1",
    "passthru": false,
    "topic": "topic",
    "topicType": "msg",
    "style": "",
    "className": "",
    "onvalue": "true",
    "onvalueType": "bool",
    "onicon": "",
    "oncolor": "",
    "offvalue": "false",
    "offvalueType": "bool",
    "officon": "",
    "offcolor": "",
    "x": 1910,
    "y": 6000,
    "wires": [
      [
        "07f809162cd1c7ff"
      ]
    ]
  },
  {
    "id": "33daf357f466a619",
    "type": "ui-slider",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "group": "eeb78a0cec96cfe6",
    "name": "off nuùmber",
    "label": "Niveau bas",
    "tooltip": "",
    "order": 12,
    "width": "6",
    "height": "1",
    "passthru": false,
    "outs": "end",
    "topic": "topic",
    "topicType": "msg",
    "thumbLabel": true,
    "min": 0,
    "max": "99",
    "step": 1,
    "className": "",
    "x": 1910,
    "y": 6060,
    "wires": [
      [
        "07f809162cd1c7ff"
      ]
    ]
  },
  {
    "id": "fc63cc48fc705844",
    "type": "ui-text-input",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "group": "eeb78a0cec96cfe6",
    "name": "off text",
    "label": "Niveau bas",
    "order": 13,
    "width": "6",
    "height": "1",
    "topic": "topic",
    "topicType": "msg",
    "mode": "text",
    "delay": 300,
    "passthru": false,
    "sendOnDelay": false,
    "sendOnBlur": true,
    "sendOnEnter": true,
    "className": "",
    "x": 1890,
    "y": 6120,
    "wires": [
      [
        "07f809162cd1c7ff"
      ]
    ]
  },
  {
    "id": "07f809162cd1c7ff",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "add.trigger.off",
        "pt": "flow",
        "to": "payload",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 2090,
    "y": 6000,
    "wires": [
      [
        "dc8e1ea48d3d1380"
      ]
    ]
  },
  {
    "id": "dc8e1ea48d3d1380",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "...",
    "rules": [],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 2250,
    "y": 5940,
    "wires": [
      [
        "33023e6e1a555bef"
      ]
    ]
  },
  {
    "id": "9c9c71c664eee075",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      },
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "[\t    {'label':'Aucun','value':''},\t    {'label':'Booléen','value':'boolean'},\t    {'label':'Nombre','value':'number'},\t    {'label':'Text','value':'text'}\t]",
        "tot": "jsonata"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1720,
    "y": 5580,
    "wires": [
      [
        "13da4488e5901405"
      ]
    ]
  },
  {
    "id": "af55e037ae50391e",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      },
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "[\t    {'label':'Aucun','value':''},\t    {'label':'Booléen','value':'boolean'},\t    {'label':'Nombre','value':'number'},\t    {'label':'Text','value':'text'}\t]",
        "tot": "jsonata"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1720,
    "y": 5880,
    "wires": [
      [
        "16438bfdddf3750d"
      ]
    ]
  },
  {
    "id": "f2369a7f542517f2",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "true",
        "tot": "bool"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1720,
    "y": 5700,
    "wires": [
      [
        "2accc11944283ad8"
      ]
    ]
  },
  {
    "id": "3f26dd11ba94f7c0",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "99",
        "tot": "num"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1720,
    "y": 5760,
    "wires": [
      [
        "c98c47082b028dd0"
      ]
    ]
  },
  {
    "id": "3b9bcd70499a72a7",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1720,
    "y": 5820,
    "wires": [
      [
        "eae0eb6cb3648279"
      ]
    ]
  },
  {
    "id": "2b5138253f338bd9",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "false",
        "tot": "bool"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1740,
    "y": 6000,
    "wires": [
      [
        "f3b0e08392296b29"
      ]
    ]
  },
  {
    "id": "ee9f0a9d9f5bfded",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "0",
        "tot": "num"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1740,
    "y": 6060,
    "wires": [
      [
        "33daf357f466a619"
      ]
    ]
  },
  {
    "id": "9555f3b85c4c0239",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1740,
    "y": 6120,
    "wires": [
      [
        "fc63cc48fc705844"
      ]
    ]
  },
  {
    "id": "33023e6e1a555bef",
    "type": "ui-button",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "group": "eeb78a0cec96cfe6",
    "name": "add",
    "label": "",
    "order": 14,
    "width": "6",
    "height": "1",
    "emulateClick": false,
    "tooltip": "",
    "color": "",
    "bgcolor": "",
    "className": "",
    "icon": "plus",
    "iconPosition": "left",
    "payload": "",
    "payloadType": "str",
    "topic": "topic",
    "topicType": "msg",
    "x": 1890,
    "y": 6180,
    "wires": [
      [
        "1870deac817325e5"
      ]
    ]
  },
  {
    "id": "4f54be59fa4e6633",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "set notification metric",
    "rules": [
      {
        "t": "set",
        "p": "bucket",
        "pt": "msg",
        "to": "system",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "measurement",
        "pt": "msg",
        "to": "notification",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "field",
        "pt": "msg",
        "to": "message",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "Scène ajouté",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "repeat",
        "pt": "msg",
        "to": "true",
        "tot": "bool"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 2780,
    "y": 6180,
    "wires": [
      [
        "d32dc8a93d1ac3ad"
      ]
    ]
  },
  {
    "id": "0a0de1ee87778882",
    "type": "debug",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "scenes - add trigger",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "true",
    "targetType": "full",
    "statusVal": "",
    "statusType": "auto",
    "x": 3040,
    "y": 6120,
    "wires": []
  },
  {
    "id": "d32dc8a93d1ac3ad",
    "type": "link out",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "scenes - add scene",
    "mode": "link",
    "links": [
      "206c1fb4a48067df",
      "2cc720203fa29afe",
      "3263d6b1a159b0ff"
    ],
    "x": 2955,
    "y": 6180,
    "wires": []
  },
  {
    "id": "7d84766600c7d5a9",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "to global",
    "rules": [
      {
        "t": "set",
        "p": "triggers[msg.payload.trigger][msg.md5]",
        "pt": "global",
        "to": "payload",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 2560,
    "y": 6120,
    "wires": [
      [
        "4f54be59fa4e6633",
        "0a0de1ee87778882"
      ]
    ]
  },
  {
    "id": "380eefbfb46f3a27",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "scene type",
    "property": "payload",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "",
        "vt": "str"
      },
      {
        "t": "eq",
        "v": "lighting",
        "vt": "str"
      },
      {
        "t": "eq",
        "v": "shading",
        "vt": "str"
      },
      {
        "t": "eq",
        "v": "airflow",
        "vt": "str"
      },
      {
        "t": "eq",
        "v": "cumulus",
        "vt": "str"
      },
      {
        "t": "eq",
        "v": "snapshot",
        "vt": "str"
      },
      {
        "t": "eq",
        "v": "overload",
        "vt": "str"
      },
      {
        "t": "eq",
        "v": "toggle",
        "vt": "str"
      },
      {
        "t": "eq",
        "v": "clone",
        "vt": "str"
      },
      {
        "t": "eq",
        "v": "thermostat",
        "vt": "str"
      },
      {
        "t": "eq",
        "v": "custom color",
        "vt": "str"
      },
      {
        "t": "eq",
        "v": "custom level",
        "vt": "str"
      },
      {
        "t": "eq",
        "v": "custom volume",
        "vt": "str"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 13,
    "x": 310,
    "y": 420,
    "wires": [
      [
        "5a9f6ed4d2782bc6"
      ],
      [
        "ca5d39b702b03571"
      ],
      [
        "7716fc16ed250b25"
      ],
      [
        "f50307318be3d784"
      ],
      [
        "9f397c7d7826bf47"
      ],
      [
        "dc9f51f48adc1d8a"
      ],
      [
        "611c8a5cd84bb73d"
      ],
      [
        "71e09030c5018a86"
      ],
      [
        "934dc60f940169b5"
      ],
      [
        "86f50642027670e1"
      ],
      [
        "bf20df3841df8f08"
      ],
      [
        "e082053ef394efe4"
      ],
      [
        "98d0f4551cf7be28"
      ]
    ]
  },
  {
    "id": "ca5d39b702b03571",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "lighting metrics limit",
    "rules": [
      {
        "t": "set",
        "p": "limit.bucket",
        "pt": "msg",
        "to": "^((?!agenda|system|thermostat|room).)*$",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "limit.measurement",
        "pt": "msg",
        "to": "(light|outlet)$",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "limit.field",
        "pt": "msg",
        "to": "",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 530,
    "y": 420,
    "wires": [
      [
        "72ffa082cbdc1b9d"
      ]
    ]
  },
  {
    "id": "d24a93e61eae3c55",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "get entity format",
    "rules": [
      {
        "t": "set",
        "p": "tmp",
        "pt": "msg",
        "to": "$split(msg.payload,'/')",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "format",
        "pt": "msg",
        "to": "devices[msg.tmp[0]][msg.tmp[1]][msg.tmp[2]]format",
        "tot": "global"
      },
      {
        "t": "set",
        "p": "format",
        "pt": "msg",
        "to": "msg.format?msg.format:'boolean'",
        "tot": "jsonata"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 180,
    "y": 1220,
    "wires": [
      [
        "e9aff2124a3f14e7"
      ]
    ]
  },
  {
    "id": "e9aff2124a3f14e7",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "add.scene.path",
        "pt": "flow",
        "to": "payload",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "add.scene.format",
        "pt": "flow",
        "to": "format",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "type",
        "pt": "msg",
        "to": "add.scene.type",
        "tot": "flow"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 370,
    "y": 1220,
    "wires": [
      [
        "96bab19558d83451",
        "345de8645bc89741",
        "f6c8c74c3a9498c9",
        "07746cda447f9699",
        "2caa3526ed6f318d",
        "f7b90fe6011a828b",
        "297f97a073fc8b2b",
        "cdde925551f9a2f0",
        "eaddd489b98a436f"
      ]
    ]
  },
  {
    "id": "5531a15abd8c4ad6",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "5ede26c96e5cab06",
    "name": "format",
    "property": "format",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "boolean",
        "vt": "str"
      },
      {
        "t": "eq",
        "v": "dimmer",
        "vt": "str"
      },
      {
        "t": "eq",
        "v": "percent",
        "vt": "str"
      },
      {
        "t": "eq",
        "v": "number",
        "vt": "str"
      },
      {
        "t": "eq",
        "v": "text",
        "vt": "str"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 5,
    "x": 830,
    "y": 1460,
    "wires": [
      [
        "d33123fad66d11c4",
        "31afb8af4711d764"
      ],
      [
        "c9f65b1df2bc4d0d",
        "ac0bce161d183ebb"
      ],
      [
        "59d564a9bad5b8d7",
        "f999a6940f409b25"
      ],
      [
        "75cc148180be472d",
        "e01a71eb14501808"
      ],
      [
        "2c8d914c36108517",
        "c02d9cf308c8c689"
      ]
    ]
  },
  {
    "id": "d33123fad66d11c4",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "5ede26c96e5cab06",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]on",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1000,
    "y": 1400,
    "wires": [
      [
        "955c0f58ef5493c0"
      ]
    ]
  },
  {
    "id": "955c0f58ef5493c0",
    "type": "ui-switch",
    "z": "2365e16185f43e03",
    "g": "5ede26c96e5cab06",
    "name": "scene on boolean",
    "label": "Marche",
    "group": "86da7af07264458b",
    "order": 3,
    "width": "6",
    "height": "1",
    "passthru": true,
    "topic": "on",
    "topicType": "str",
    "style": "",
    "className": "",
    "onvalue": "true",
    "onvalueType": "bool",
    "onicon": "",
    "oncolor": "",
    "offvalue": "false",
    "offvalueType": "bool",
    "officon": "",
    "offcolor": "",
    "x": 1210,
    "y": 1400,
    "wires": [
      [
        "c41fa2b682849fca"
      ]
    ]
  },
  {
    "id": "31afb8af4711d764",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "5ede26c96e5cab06",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]off",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1000,
    "y": 1460,
    "wires": [
      [
        "9ad653eca9183816"
      ]
    ]
  },
  {
    "id": "9ad653eca9183816",
    "type": "ui-switch",
    "z": "2365e16185f43e03",
    "g": "5ede26c96e5cab06",
    "name": "scene off boolean",
    "label": "Arrêt",
    "group": "86da7af07264458b",
    "order": 4,
    "width": "6",
    "height": "1",
    "passthru": true,
    "topic": "off",
    "topicType": "str",
    "style": "",
    "className": "",
    "onvalue": "true",
    "onvalueType": "bool",
    "onicon": "",
    "oncolor": "",
    "offvalue": "false",
    "offvalueType": "bool",
    "officon": "",
    "offcolor": "",
    "x": 1210,
    "y": 1460,
    "wires": [
      [
        "c41fa2b682849fca"
      ]
    ]
  },
  {
    "id": "2c8d914c36108517",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "5ede26c96e5cab06",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]on",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1000,
    "y": 1880,
    "wires": [
      [
        "99cc12fec7e55af6"
      ]
    ]
  },
  {
    "id": "99cc12fec7e55af6",
    "type": "ui-text-input",
    "z": "2365e16185f43e03",
    "g": "5ede26c96e5cab06",
    "group": "86da7af07264458b",
    "name": "scene on text",
    "label": "Marche",
    "order": 11,
    "width": "6",
    "height": "1",
    "topic": "on",
    "topicType": "str",
    "mode": "text",
    "tooltip": "",
    "delay": 300,
    "passthru": true,
    "sendOnDelay": false,
    "sendOnBlur": true,
    "sendOnEnter": true,
    "className": "",
    "clearable": false,
    "sendOnClear": false,
    "icon": "",
    "iconPosition": "left",
    "iconInnerPosition": "inside",
    "x": 1190,
    "y": 1880,
    "wires": [
      [
        "c41fa2b682849fca"
      ]
    ]
  },
  {
    "id": "c02d9cf308c8c689",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "5ede26c96e5cab06",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]off",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1000,
    "y": 1940,
    "wires": [
      [
        "6c7268e12e4ddb66"
      ]
    ]
  },
  {
    "id": "6c7268e12e4ddb66",
    "type": "ui-text-input",
    "z": "2365e16185f43e03",
    "g": "5ede26c96e5cab06",
    "group": "86da7af07264458b",
    "name": "scene off text",
    "label": "Arrêt",
    "order": 12,
    "width": "6",
    "height": "1",
    "topic": "off",
    "topicType": "str",
    "mode": "text",
    "tooltip": "",
    "delay": 300,
    "passthru": true,
    "sendOnDelay": false,
    "sendOnBlur": true,
    "sendOnEnter": true,
    "className": "",
    "clearable": false,
    "sendOnClear": false,
    "icon": "",
    "iconPosition": "left",
    "iconInnerPosition": "inside",
    "x": 1190,
    "y": 1940,
    "wires": [
      [
        "c41fa2b682849fca"
      ]
    ]
  },
  {
    "id": "c9f65b1df2bc4d0d",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "5ede26c96e5cab06",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]on",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1000,
    "y": 1520,
    "wires": [
      [
        "18e76789cedf987f"
      ]
    ]
  },
  {
    "id": "18e76789cedf987f",
    "type": "ui-slider",
    "z": "2365e16185f43e03",
    "g": "5ede26c96e5cab06",
    "group": "86da7af07264458b",
    "name": "scene on dimmer",
    "label": "Marche",
    "tooltip": "",
    "order": 5,
    "width": "6",
    "height": "1",
    "passthru": true,
    "outs": "end",
    "topic": "on",
    "topicType": "str",
    "thumbLabel": "true",
    "showTicks": "false",
    "min": 0,
    "max": "99",
    "step": 1,
    "className": "",
    "iconPrepend": "",
    "iconAppend": "",
    "color": "",
    "colorTrack": "",
    "colorThumb": "",
    "x": 1210,
    "y": 1520,
    "wires": [
      [
        "c41fa2b682849fca"
      ]
    ]
  },
  {
    "id": "ac0bce161d183ebb",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "5ede26c96e5cab06",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]off",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1000,
    "y": 1580,
    "wires": [
      [
        "26bd80d9092552c2"
      ]
    ]
  },
  {
    "id": "26bd80d9092552c2",
    "type": "ui-slider",
    "z": "2365e16185f43e03",
    "g": "5ede26c96e5cab06",
    "group": "86da7af07264458b",
    "name": "scene off dimmer",
    "label": "Arrêt",
    "tooltip": "",
    "order": 6,
    "width": "6",
    "height": "1",
    "passthru": true,
    "outs": "end",
    "topic": "off",
    "topicType": "str",
    "thumbLabel": "true",
    "showTicks": "false",
    "min": 0,
    "max": "99",
    "step": 1,
    "className": "",
    "iconPrepend": "",
    "iconAppend": "",
    "color": "",
    "colorTrack": "",
    "colorThumb": "",
    "x": 1210,
    "y": 1580,
    "wires": [
      [
        "c41fa2b682849fca"
      ]
    ]
  },
  {
    "id": "444340c4439ad7df",
    "type": "ui-slider",
    "z": "2365e16185f43e03",
    "g": "5ede26c96e5cab06",
    "group": "86da7af07264458b",
    "name": "scene on percent",
    "label": "Marche",
    "tooltip": "",
    "order": 7,
    "width": "6",
    "height": "1",
    "passthru": true,
    "outs": "end",
    "topic": "on",
    "topicType": "str",
    "thumbLabel": "true",
    "showTicks": "false",
    "min": 0,
    "max": "100",
    "step": 1,
    "className": "",
    "iconPrepend": "",
    "iconAppend": "",
    "color": "",
    "colorTrack": "",
    "colorThumb": "",
    "x": 1210,
    "y": 1640,
    "wires": [
      [
        "c41fa2b682849fca"
      ]
    ]
  },
  {
    "id": "59d564a9bad5b8d7",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "5ede26c96e5cab06",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]on",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1000,
    "y": 1640,
    "wires": [
      [
        "444340c4439ad7df"
      ]
    ]
  },
  {
    "id": "f999a6940f409b25",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "5ede26c96e5cab06",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]off",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1000,
    "y": 1700,
    "wires": [
      [
        "a609d98d8b043604"
      ]
    ]
  },
  {
    "id": "a609d98d8b043604",
    "type": "ui-slider",
    "z": "2365e16185f43e03",
    "g": "5ede26c96e5cab06",
    "group": "86da7af07264458b",
    "name": "scene off percent",
    "label": "Arrêt",
    "tooltip": "",
    "order": 8,
    "width": "6",
    "height": "1",
    "passthru": true,
    "outs": "end",
    "topic": "off",
    "topicType": "str",
    "thumbLabel": "true",
    "showTicks": "false",
    "min": 0,
    "max": "99",
    "step": 1,
    "className": "",
    "iconPrepend": "",
    "iconAppend": "",
    "color": "",
    "colorTrack": "",
    "colorThumb": "",
    "x": 1210,
    "y": 1700,
    "wires": [
      [
        "c41fa2b682849fca"
      ]
    ]
  },
  {
    "id": "75cc148180be472d",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "5ede26c96e5cab06",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]on",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1000,
    "y": 1760,
    "wires": [
      [
        "dcd32241c9d8f9b4"
      ]
    ]
  },
  {
    "id": "dcd32241c9d8f9b4",
    "type": "ui-text-input",
    "z": "2365e16185f43e03",
    "g": "5ede26c96e5cab06",
    "group": "86da7af07264458b",
    "name": "scene on number",
    "label": "Marche",
    "order": 9,
    "width": "6",
    "height": "1",
    "topic": "on",
    "topicType": "str",
    "mode": "text",
    "tooltip": "",
    "delay": 300,
    "passthru": true,
    "sendOnDelay": false,
    "sendOnBlur": true,
    "sendOnEnter": true,
    "className": "",
    "clearable": false,
    "sendOnClear": false,
    "icon": "",
    "iconPosition": "left",
    "iconInnerPosition": "inside",
    "x": 1210,
    "y": 1760,
    "wires": [
      [
        "c41fa2b682849fca"
      ]
    ]
  },
  {
    "id": "e01a71eb14501808",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "5ede26c96e5cab06",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]off",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1000,
    "y": 1820,
    "wires": [
      [
        "4c457d101747e608"
      ]
    ]
  },
  {
    "id": "4c457d101747e608",
    "type": "ui-text-input",
    "z": "2365e16185f43e03",
    "g": "5ede26c96e5cab06",
    "group": "86da7af07264458b",
    "name": "scene off number",
    "label": "Arrêt",
    "order": 10,
    "width": "6",
    "height": "1",
    "topic": "off",
    "topicType": "str",
    "mode": "text",
    "tooltip": "",
    "delay": 300,
    "passthru": true,
    "sendOnDelay": false,
    "sendOnBlur": true,
    "sendOnEnter": true,
    "className": "",
    "clearable": false,
    "sendOnClear": false,
    "icon": "",
    "iconPosition": "left",
    "iconInnerPosition": "inside",
    "x": 1210,
    "y": 1820,
    "wires": [
      [
        "c41fa2b682849fca"
      ]
    ]
  },
  {
    "id": "9509fcecd56acf35",
    "type": "ui-table",
    "z": "2365e16185f43e03",
    "g": "77a176666a9075c0",
    "group": "8b3cd32ecb695d93",
    "name": "",
    "label": "text",
    "order": 3,
    "width": "18",
    "height": "1",
    "maxrows": 0,
    "passthru": false,
    "autocols": true,
    "showSearch": false,
    "selectionType": "none",
    "columns": [],
    "x": 1790,
    "y": 4540,
    "wires": [
      []
    ]
  },
  {
    "id": "98256ab7befa37da",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "77a176666a9075c0",
    "name": "from global",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes",
        "tot": "global"
      },
      {
        "t": "set",
        "p": "list.types",
        "pt": "flow",
        "to": "[]",
        "tot": "json"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 170,
    "y": 4480,
    "wires": [
      [
        "3067689be2297942"
      ]
    ]
  },
  {
    "id": "3067689be2297942",
    "type": "split",
    "z": "2365e16185f43e03",
    "g": "77a176666a9075c0",
    "name": "split types",
    "splt": "\\n",
    "spltType": "str",
    "arraySplt": 1,
    "arraySpltType": "len",
    "stream": false,
    "addname": "type",
    "x": 360,
    "y": 4480,
    "wires": [
      [
        "c7bd298ffb4de55f"
      ]
    ]
  },
  {
    "id": "91316e3eefbcc0cf",
    "type": "join",
    "z": "2365e16185f43e03",
    "g": "77a176666a9075c0",
    "name": "",
    "mode": "auto",
    "build": "object",
    "property": "payload",
    "propertyType": "msg",
    "key": "topic",
    "joiner": "\\n",
    "joinerType": "str",
    "accumulate": "false",
    "timeout": "",
    "count": "",
    "reduceRight": false,
    "x": 1470,
    "y": 4540,
    "wires": [
      [
        "8354904bf42824c1"
      ]
    ]
  },
  {
    "id": "8354904bf42824c1",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "77a176666a9075c0",
    "name": "table",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "list.scenes",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1630,
    "y": 4540,
    "wires": [
      [
        "9509fcecd56acf35",
        "15fa91642ca84b97"
      ]
    ]
  },
  {
    "id": "15fa91642ca84b97",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "77a176666a9075c0",
    "name": "count",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "$count(msg.payload)",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1630,
    "y": 4600,
    "wires": [
      [
        "c05eff78970180b9"
      ]
    ]
  },
  {
    "id": "c05eff78970180b9",
    "type": "ui-text",
    "z": "2365e16185f43e03",
    "g": "77a176666a9075c0",
    "group": "8b3cd32ecb695d93",
    "order": 2,
    "width": "6",
    "height": "1",
    "name": "scenes count",
    "label": "Nombre de scènes enregistrées : ",
    "format": "{{msg.payload}}",
    "layout": "row-center",
    "style": false,
    "font": "",
    "fontSize": 16,
    "color": "#717171",
    "className": "",
    "x": 1810,
    "y": 4600,
    "wires": []
  },
  {
    "id": "f0e0dfead2456763",
    "type": "split",
    "z": "2365e16185f43e03",
    "g": "77a176666a9075c0",
    "name": "split scenes",
    "splt": "\\n",
    "spltType": "str",
    "arraySplt": 1,
    "arraySpltType": "len",
    "stream": false,
    "addname": "type",
    "x": 370,
    "y": 4540,
    "wires": [
      [
        "3822cfa6e7343451"
      ]
    ]
  },
  {
    "id": "1a28a0f57cacac56",
    "type": "ui-dropdown",
    "z": "2365e16185f43e03",
    "g": "77a176666a9075c0",
    "group": "8b3cd32ecb695d93",
    "name": "scenes types",
    "label": "Type de scène :",
    "tooltip": "",
    "order": 1,
    "width": "6",
    "height": "1",
    "passthru": false,
    "multiple": false,
    "options": [
      {
        "label": "» recharger",
        "value": "",
        "type": "str"
      }
    ],
    "payload": "",
    "topic": "topic",
    "topicType": "msg",
    "className": "",
    "x": 1810,
    "y": 4480,
    "wires": [
      [
        "82b97ac85ee0461e"
      ]
    ]
  },
  {
    "id": "c7bd298ffb4de55f",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "77a176666a9075c0",
    "name": "add",
    "rules": [
      {
        "t": "set",
        "p": "type",
        "pt": "msg",
        "to": "{\t    \"label\":msg.type,\t    \"value\":msg.type\t    }",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "types",
        "pt": "msg",
        "to": "list.types",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "list.types",
        "pt": "flow",
        "to": "$append(msg.types,msg.type)",
        "tot": "jsonata"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1290,
    "y": 4480,
    "wires": [
      [
        "922afa0f092ea7ac"
      ]
    ]
  },
  {
    "id": "922afa0f092ea7ac",
    "type": "join",
    "z": "2365e16185f43e03",
    "g": "77a176666a9075c0",
    "name": "",
    "mode": "auto",
    "build": "object",
    "property": "payload",
    "propertyType": "msg",
    "key": "topic",
    "joiner": "\\n",
    "joinerType": "str",
    "accumulate": "false",
    "timeout": "",
    "count": "",
    "reduceRight": false,
    "x": 1450,
    "y": 4480,
    "wires": [
      [
        "63a06048dc8ec077"
      ]
    ]
  },
  {
    "id": "63a06048dc8ec077",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "77a176666a9075c0",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "list.types",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "$sort(msg.options, function($l, $r) {\t  $l[0].label > $r[0].label\t})",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "$append(msg.options,[{'label':'» recharger','value':''}])",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1620,
    "y": 4480,
    "wires": [
      [
        "1a28a0f57cacac56"
      ]
    ]
  },
  {
    "id": "5647d49696914090",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "77a176666a9075c0",
    "name": "from global",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.payload]",
        "tot": "global"
      },
      {
        "t": "set",
        "p": "list.scenes",
        "pt": "flow",
        "to": "[]",
        "tot": "json"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 170,
    "y": 4540,
    "wires": [
      [
        "f0e0dfead2456763"
      ]
    ]
  },
  {
    "id": "c08574254bd03c3d",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "77a176666a9075c0",
    "name": "reset",
    "rules": [
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "remove",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "bucket",
        "pt": "msg"
      },
      {
        "t": "delete",
        "p": "measurement",
        "pt": "msg"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      },
      {
        "t": "delete",
        "p": "options",
        "pt": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1630,
    "y": 4360,
    "wires": [
      [
        "3c1e652d59e2bc73",
        "1a28a0f57cacac56",
        "c05eff78970180b9",
        "51fd890f206eb658"
      ]
    ]
  },
  {
    "id": "3c1e652d59e2bc73",
    "type": "delay",
    "z": "2365e16185f43e03",
    "g": "77a176666a9075c0",
    "name": "",
    "pauseType": "delay",
    "timeout": "100",
    "timeoutUnits": "milliseconds",
    "rate": "1",
    "nbRateUnits": "1",
    "rateUnits": "second",
    "randomFirst": "1",
    "randomLast": "5",
    "randomUnits": "seconds",
    "drop": false,
    "allowrate": false,
    "outputs": 1,
    "x": 1810,
    "y": 4360,
    "wires": [
      [
        "98256ab7befa37da"
      ]
    ]
  },
  {
    "id": "d2ca5cbd23e2cf88",
    "type": "link in",
    "z": "2365e16185f43e03",
    "g": "77a176666a9075c0",
    "name": "scenes - list scenes",
    "links": [
      "8d98777b03b2341f",
      "d7f64b57a1fb0517",
      "43166899a8759ba8",
      "9635cf6ffe5f5df1"
    ],
    "x": 1495,
    "y": 4360,
    "wires": [
      [
        "c08574254bd03c3d"
      ]
    ]
  },
  {
    "id": "3822cfa6e7343451",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "77a176666a9075c0",
    "name": "move",
    "rules": [
      {
        "t": "set",
        "p": "tmp",
        "pt": "msg",
        "to": "$split(msg.payload.path,'/')",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "bucket",
        "pt": "msg",
        "to": "tmp[0]",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "field",
        "pt": "msg",
        "to": "tmp[1]",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "field2",
        "pt": "msg",
        "to": "tmp[2]",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 550,
    "y": 4540,
    "wires": [
      [
        "df9cad37a3d97a08"
      ]
    ]
  },
  {
    "id": "df9cad37a3d97a08",
    "type": "link call",
    "z": "2365e16185f43e03",
    "g": "77a176666a9075c0",
    "name": "",
    "links": [
      "df0e4ab2e1efc286"
    ],
    "linkType": "static",
    "timeout": "30",
    "x": 740,
    "y": 4540,
    "wires": [
      [
        "4ffb1946a7f3e562"
      ]
    ]
  },
  {
    "id": "4ffb1946a7f3e562",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "77a176666a9075c0",
    "name": "move",
    "rules": [
      {
        "t": "set",
        "p": "measurement",
        "pt": "msg",
        "to": "trans",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "field",
        "pt": "msg",
        "to": "field2",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 930,
    "y": 4540,
    "wires": [
      [
        "4b6a5d60e2d13046"
      ]
    ]
  },
  {
    "id": "4b6a5d60e2d13046",
    "type": "link call",
    "z": "2365e16185f43e03",
    "g": "77a176666a9075c0",
    "name": "",
    "links": [
      "df0e4ab2e1efc286"
    ],
    "linkType": "static",
    "timeout": "30",
    "x": 1120,
    "y": 4540,
    "wires": [
      [
        "9e20d3f498cdecdb"
      ]
    ]
  },
  {
    "id": "51fd890f206eb658",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "77a176666a9075c0",
    "name": "reset",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "{\t    'path':'',\t    'format':'',\t    'on':'',\t    'off':'',\t    'actif':''\t}",
        "tot": "jsonata"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1630,
    "y": 4420,
    "wires": [
      [
        "9509fcecd56acf35"
      ]
    ]
  },
  {
    "id": "273bd58e8316eb5b",
    "type": "ui-table",
    "z": "2365e16185f43e03",
    "g": "19ce5669b4839310",
    "group": "b2b7b4212f316b5b",
    "name": "",
    "label": "text",
    "order": 3,
    "width": "18",
    "height": "1",
    "maxrows": 0,
    "passthru": false,
    "autocols": true,
    "showSearch": false,
    "selectionType": "none",
    "columns": [],
    "x": 1810,
    "y": 6900,
    "wires": [
      []
    ]
  },
  {
    "id": "6ffe6ce67f84f151",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "19ce5669b4839310",
    "name": "from global",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "triggers",
        "tot": "global"
      },
      {
        "t": "set",
        "p": "list.triggers",
        "pt": "flow",
        "to": "[]",
        "tot": "json"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 170,
    "y": 6840,
    "wires": [
      [
        "7a1c0e3a684f732e"
      ]
    ]
  },
  {
    "id": "7a1c0e3a684f732e",
    "type": "split",
    "z": "2365e16185f43e03",
    "g": "19ce5669b4839310",
    "name": "split triggers",
    "splt": "\\n",
    "spltType": "str",
    "arraySplt": 1,
    "arraySpltType": "len",
    "stream": false,
    "addname": "trigger",
    "x": 370,
    "y": 6840,
    "wires": [
      [
        "f0e3c9e062d72dcf"
      ]
    ]
  },
  {
    "id": "af0dcb4755815ad4",
    "type": "join",
    "z": "2365e16185f43e03",
    "g": "19ce5669b4839310",
    "name": "",
    "mode": "auto",
    "build": "object",
    "property": "payload",
    "propertyType": "msg",
    "key": "topic",
    "joiner": "\\n",
    "joinerType": "str",
    "accumulate": "false",
    "timeout": "",
    "count": "",
    "reduceRight": false,
    "x": 1470,
    "y": 6900,
    "wires": [
      [
        "a428f5c3eb5f8470"
      ]
    ]
  },
  {
    "id": "ebebd4050c80114d",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "19ce5669b4839310",
    "name": "add",
    "rules": [
      {
        "t": "set",
        "p": "list.md5[msg.parts.index]",
        "pt": "flow",
        "to": "{\t    'type':msg.payload.type,\t    'path':msg.bucket&' / '&msg.measurement&' / '&msg.trans,\t    'on':msg.payload.on,\t    'off':msg.payload.off\t}",
        "tot": "jsonata"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1310,
    "y": 6900,
    "wires": [
      [
        "af0dcb4755815ad4"
      ]
    ]
  },
  {
    "id": "a428f5c3eb5f8470",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "19ce5669b4839310",
    "name": "table",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "list.md5",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1630,
    "y": 6900,
    "wires": [
      [
        "273bd58e8316eb5b",
        "95a06b05b8a280dd"
      ]
    ]
  },
  {
    "id": "95a06b05b8a280dd",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "19ce5669b4839310",
    "name": "count",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "$count(msg.payload)",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1630,
    "y": 6960,
    "wires": [
      [
        "e3306978b68a0c62"
      ]
    ]
  },
  {
    "id": "e3306978b68a0c62",
    "type": "ui-text",
    "z": "2365e16185f43e03",
    "g": "19ce5669b4839310",
    "group": "b2b7b4212f316b5b",
    "order": 2,
    "width": "6",
    "height": "1",
    "name": "scenes count",
    "label": "Nombre de scènes enregistrées : ",
    "format": "{{msg.payload}}",
    "layout": "row-center",
    "style": false,
    "font": "",
    "fontSize": 16,
    "color": "#717171",
    "className": "",
    "x": 1830,
    "y": 6960,
    "wires": []
  },
  {
    "id": "b766961b6627377c",
    "type": "split",
    "z": "2365e16185f43e03",
    "g": "19ce5669b4839310",
    "name": "split scenes",
    "splt": "\\n",
    "spltType": "str",
    "arraySplt": 1,
    "arraySpltType": "len",
    "stream": false,
    "addname": "",
    "x": 370,
    "y": 6900,
    "wires": [
      [
        "d89153f5c2db6207"
      ]
    ]
  },
  {
    "id": "ee71cf476db60370",
    "type": "ui-dropdown",
    "z": "2365e16185f43e03",
    "g": "19ce5669b4839310",
    "group": "b2b7b4212f316b5b",
    "name": "triggers",
    "label": "Déclencheur",
    "tooltip": "",
    "order": 1,
    "width": "6",
    "height": "1",
    "passthru": false,
    "multiple": false,
    "options": [
      {
        "label": "» recharger",
        "value": "",
        "type": "str"
      }
    ],
    "payload": "",
    "topic": "topic",
    "topicType": "msg",
    "className": "",
    "x": 1820,
    "y": 6840,
    "wires": [
      [
        "464dc2d69be4c4d2"
      ]
    ]
  },
  {
    "id": "5ccb44d34776aeb2",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "19ce5669b4839310",
    "name": "add",
    "rules": [
      {
        "t": "set",
        "p": "trigger",
        "pt": "msg",
        "to": "{\t    \"label\":msg.bucket&' / '&msg.measurement&' / '&msg.trans,\t    \"value\":msg.trigger\t    }",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "triggers",
        "pt": "msg",
        "to": "list.triggers",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "list.triggers",
        "pt": "flow",
        "to": "$append(msg.triggers,msg.trigger)",
        "tot": "jsonata"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1310,
    "y": 6840,
    "wires": [
      [
        "3ecde7539b026698"
      ]
    ]
  },
  {
    "id": "3ecde7539b026698",
    "type": "join",
    "z": "2365e16185f43e03",
    "g": "19ce5669b4839310",
    "name": "",
    "mode": "auto",
    "build": "object",
    "property": "payload",
    "propertyType": "msg",
    "key": "topic",
    "joiner": "\\n",
    "joinerType": "str",
    "accumulate": "false",
    "timeout": "",
    "count": "",
    "reduceRight": false,
    "x": 1470,
    "y": 6840,
    "wires": [
      [
        "a8c6849c3d6984a4"
      ]
    ]
  },
  {
    "id": "a8c6849c3d6984a4",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "19ce5669b4839310",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "list.triggers",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "$sort(msg.options, function($l, $r) {\t  $l[0].label > $r[0].label\t})",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "$append(msg.options,[{'label':'» recharger','value':''}])",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1640,
    "y": 6840,
    "wires": [
      [
        "ee71cf476db60370"
      ]
    ]
  },
  {
    "id": "fbb6b0967cfaf84c",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "19ce5669b4839310",
    "name": "from global",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "triggers[msg.payload]",
        "tot": "global"
      },
      {
        "t": "set",
        "p": "list.md5",
        "pt": "flow",
        "to": "[]",
        "tot": "json"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 170,
    "y": 6900,
    "wires": [
      [
        "b766961b6627377c"
      ]
    ]
  },
  {
    "id": "b9ccd0540ef6392a",
    "type": "delay",
    "z": "2365e16185f43e03",
    "g": "19ce5669b4839310",
    "name": "",
    "pauseType": "delay",
    "timeout": "100",
    "timeoutUnits": "milliseconds",
    "rate": "1",
    "nbRateUnits": "1",
    "rateUnits": "second",
    "randomFirst": "1",
    "randomLast": "5",
    "randomUnits": "seconds",
    "drop": false,
    "allowrate": false,
    "outputs": 1,
    "x": 1830,
    "y": 6720,
    "wires": [
      [
        "6ffe6ce67f84f151"
      ]
    ]
  },
  {
    "id": "3664ee38f2da0806",
    "type": "link in",
    "z": "2365e16185f43e03",
    "g": "19ce5669b4839310",
    "name": "scenes - list triggers",
    "links": [
      "8d98777b03b2341f",
      "a21488eb16a467fa",
      "30b864529ddd7036"
    ],
    "x": 1515,
    "y": 6720,
    "wires": [
      [
        "32f125658d78f3aa"
      ]
    ]
  },
  {
    "id": "32f125658d78f3aa",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "19ce5669b4839310",
    "name": "reset",
    "rules": [
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "remove",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "bucket",
        "pt": "msg"
      },
      {
        "t": "delete",
        "p": "measurement",
        "pt": "msg"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      },
      {
        "t": "delete",
        "p": "options",
        "pt": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1650,
    "y": 6720,
    "wires": [
      [
        "b9ccd0540ef6392a",
        "ee71cf476db60370",
        "e3306978b68a0c62",
        "90755f813c5b2497"
      ]
    ]
  },
  {
    "id": "d89153f5c2db6207",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "19ce5669b4839310",
    "name": "move",
    "rules": [
      {
        "t": "set",
        "p": "tmp",
        "pt": "msg",
        "to": "$split(msg.payload.path,'/')",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "bucket",
        "pt": "msg",
        "to": "tmp[0]",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "field",
        "pt": "msg",
        "to": "tmp[1]",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "field2",
        "pt": "msg",
        "to": "tmp[2]",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 550,
    "y": 6900,
    "wires": [
      [
        "ec120ed7d3da5269"
      ]
    ]
  },
  {
    "id": "ec120ed7d3da5269",
    "type": "link call",
    "z": "2365e16185f43e03",
    "g": "19ce5669b4839310",
    "name": "",
    "links": [
      "df0e4ab2e1efc286"
    ],
    "linkType": "static",
    "timeout": "30",
    "x": 740,
    "y": 6900,
    "wires": [
      [
        "7f077aece50a67f1"
      ]
    ]
  },
  {
    "id": "7f077aece50a67f1",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "19ce5669b4839310",
    "name": "move",
    "rules": [
      {
        "t": "set",
        "p": "measurement",
        "pt": "msg",
        "to": "trans",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "field",
        "pt": "msg",
        "to": "field2",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 930,
    "y": 6900,
    "wires": [
      [
        "aea93e1a9e4fe7c3"
      ]
    ]
  },
  {
    "id": "aea93e1a9e4fe7c3",
    "type": "link call",
    "z": "2365e16185f43e03",
    "g": "19ce5669b4839310",
    "name": "",
    "links": [
      "df0e4ab2e1efc286"
    ],
    "linkType": "static",
    "timeout": "30",
    "x": 1120,
    "y": 6900,
    "wires": [
      [
        "ebebd4050c80114d"
      ]
    ]
  },
  {
    "id": "90755f813c5b2497",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "19ce5669b4839310",
    "name": "reset",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "{\t    'path':'',\t    'format':'',\t    'on':'',\t    'off':'',\t    'actif':''\t}",
        "tot": "jsonata"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1650,
    "y": 6780,
    "wires": [
      [
        "273bd58e8316eb5b"
      ]
    ]
  },
  {
    "id": "f0e3c9e062d72dcf",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "19ce5669b4839310",
    "name": "move",
    "rules": [
      {
        "t": "set",
        "p": "tmp",
        "pt": "msg",
        "to": "$split(msg.trigger,'/')",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "bucket",
        "pt": "msg",
        "to": "tmp[0]",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "field",
        "pt": "msg",
        "to": "tmp[1]",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "field2",
        "pt": "msg",
        "to": "tmp[2]",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 550,
    "y": 6840,
    "wires": [
      [
        "81dc69f880d9c871"
      ]
    ]
  },
  {
    "id": "81dc69f880d9c871",
    "type": "link call",
    "z": "2365e16185f43e03",
    "g": "19ce5669b4839310",
    "name": "",
    "links": [
      "df0e4ab2e1efc286"
    ],
    "linkType": "static",
    "timeout": "30",
    "x": 740,
    "y": 6840,
    "wires": [
      [
        "864cbc5606ca463a"
      ]
    ]
  },
  {
    "id": "864cbc5606ca463a",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "19ce5669b4839310",
    "name": "move",
    "rules": [
      {
        "t": "set",
        "p": "measurement",
        "pt": "msg",
        "to": "trans",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "field",
        "pt": "msg",
        "to": "field2",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 930,
    "y": 6840,
    "wires": [
      [
        "da61b3bf319b4fbf"
      ]
    ]
  },
  {
    "id": "da61b3bf319b4fbf",
    "type": "link call",
    "z": "2365e16185f43e03",
    "g": "19ce5669b4839310",
    "name": "",
    "links": [
      "df0e4ab2e1efc286"
    ],
    "linkType": "static",
    "timeout": "30",
    "x": 1120,
    "y": 6840,
    "wires": [
      [
        "5ccb44d34776aeb2"
      ]
    ]
  },
  {
    "id": "8bb1bba6cd29a251",
    "type": "delay",
    "z": "2365e16185f43e03",
    "g": "fa9acbe70d9d6582",
    "name": "1 min",
    "pauseType": "delay",
    "timeout": "1",
    "timeoutUnits": "minutes",
    "rate": "1",
    "nbRateUnits": "1",
    "rateUnits": "second",
    "randomFirst": "1",
    "randomLast": "5",
    "randomUnits": "seconds",
    "drop": false,
    "allowrate": false,
    "outputs": 1,
    "x": 1210,
    "y": 60,
    "wires": [
      [
        "8d98777b03b2341f"
      ]
    ]
  },
  {
    "id": "ee01b93bd48330c2",
    "type": "link in",
    "z": "2365e16185f43e03",
    "g": "fa9acbe70d9d6582",
    "name": "scenes - boot wait",
    "links": [
      "d92386370d84c100"
    ],
    "x": 1075,
    "y": 60,
    "wires": [
      [
        "8bb1bba6cd29a251"
      ]
    ]
  },
  {
    "id": "8d98777b03b2341f",
    "type": "link out",
    "z": "2365e16185f43e03",
    "g": "fa9acbe70d9d6582",
    "name": "scenes - boot wait",
    "mode": "link",
    "links": [
      "251f1801fba21ab0",
      "d2ca5cbd23e2cf88",
      "2cc720203fa29afe",
      "3664ee38f2da0806",
      "0d7f6889440560fb",
      "9c3c4a7cb6430948"
    ],
    "x": 1335,
    "y": 60,
    "wires": []
  },
  {
    "id": "9e20d3f498cdecdb",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "77a176666a9075c0",
    "name": "add",
    "rules": [
      {
        "t": "delete",
        "p": "payload.type",
        "pt": "msg"
      },
      {
        "t": "delete",
        "p": "payload.response",
        "pt": "msg"
      },
      {
        "t": "set",
        "p": "list.scenes[msg.parts.index]",
        "pt": "flow",
        "to": "payload",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "list.scenes[msg.parts.index].path",
        "pt": "flow",
        "to": "msg.bucket&' / '&msg.measurement&' / '&msg.trans",
        "tot": "jsonata"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1310,
    "y": 4540,
    "wires": [
      [
        "91316e3eefbcc0cf"
      ]
    ]
  },
  {
    "id": "0d7f6889440560fb",
    "type": "link in",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "scenes - delete trigger",
    "links": [
      "8d98777b03b2341f",
      "a21488eb16a467fa",
      "30b864529ddd7036"
    ],
    "x": 1495,
    "y": 6300,
    "wires": [
      [
        "7e1540e06576c37e"
      ]
    ]
  },
  {
    "id": "7e1540e06576c37e",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "reset",
    "rules": [
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "remove",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "bucket",
        "pt": "msg"
      },
      {
        "t": "delete",
        "p": "measurement",
        "pt": "msg"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      },
      {
        "t": "delete",
        "p": "options",
        "pt": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1650,
    "y": 6300,
    "wires": [
      [
        "8b992a342f07cc51",
        "470f6755223e9f3e",
        "13aa9d0fd7bfb031",
        "e7b794a92adb0fc0"
      ]
    ]
  },
  {
    "id": "8b992a342f07cc51",
    "type": "delay",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "",
    "pauseType": "delay",
    "timeout": "100",
    "timeoutUnits": "milliseconds",
    "rate": "1",
    "nbRateUnits": "1",
    "rateUnits": "second",
    "randomFirst": "1",
    "randomLast": "5",
    "randomUnits": "seconds",
    "drop": false,
    "allowrate": false,
    "outputs": 1,
    "x": 1830,
    "y": 6300,
    "wires": [
      [
        "58195b7dcdf542c3"
      ]
    ]
  },
  {
    "id": "58195b7dcdf542c3",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "from global",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "triggers",
        "tot": "global"
      },
      {
        "t": "set",
        "p": "del.triggers",
        "pt": "flow",
        "to": "[]",
        "tot": "json"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 170,
    "y": 6360,
    "wires": [
      [
        "11d2871802dc1814"
      ]
    ]
  },
  {
    "id": "11d2871802dc1814",
    "type": "split",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "split triggers",
    "splt": "\\n",
    "spltType": "str",
    "arraySplt": 1,
    "arraySpltType": "len",
    "stream": false,
    "addname": "trigger",
    "x": 370,
    "y": 6360,
    "wires": [
      [
        "1e77b920b8ef44ae"
      ]
    ]
  },
  {
    "id": "470f6755223e9f3e",
    "type": "ui-dropdown",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "group": "c32053913a6bb245",
    "name": "triggers",
    "label": "Déclencheur",
    "tooltip": "",
    "order": 1,
    "width": "6",
    "height": "1",
    "passthru": false,
    "multiple": false,
    "options": [
      {
        "label": "» recharger",
        "value": "",
        "type": "str"
      }
    ],
    "payload": "",
    "topic": "topic",
    "topicType": "msg",
    "className": "",
    "x": 1820,
    "y": 6360,
    "wires": [
      [
        "772f392435a3dd17"
      ]
    ]
  },
  {
    "id": "feafb2a13eb7aba6",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "add",
    "rules": [
      {
        "t": "set",
        "p": "trigger",
        "pt": "msg",
        "to": "{\t    \"label\":msg.bucket&' / '&msg.measurement&' / '&msg.trans,\t    \"value\":msg.trigger\t    }",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "triggers",
        "pt": "msg",
        "to": "del.triggers",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "del.triggers",
        "pt": "flow",
        "to": "$append(msg.triggers,msg.trigger)",
        "tot": "jsonata"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1310,
    "y": 6360,
    "wires": [
      [
        "59453ef087594e15"
      ]
    ]
  },
  {
    "id": "59453ef087594e15",
    "type": "join",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "",
    "mode": "auto",
    "build": "object",
    "property": "payload",
    "propertyType": "msg",
    "key": "topic",
    "joiner": "\\n",
    "joinerType": "str",
    "accumulate": "false",
    "timeout": "",
    "count": "",
    "reduceRight": false,
    "x": 1470,
    "y": 6360,
    "wires": [
      [
        "9008dc6f58df69ce"
      ]
    ]
  },
  {
    "id": "9008dc6f58df69ce",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "del.triggers",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "$sort(msg.options, function($l, $r) {\t  $l[0].label > $r[0].label\t})",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "$append(msg.options,[{'label':'» recharger','value':''}])",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1640,
    "y": 6360,
    "wires": [
      [
        "470f6755223e9f3e"
      ]
    ]
  },
  {
    "id": "1e77b920b8ef44ae",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "move",
    "rules": [
      {
        "t": "set",
        "p": "tmp",
        "pt": "msg",
        "to": "$split(msg.trigger,'/')",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "bucket",
        "pt": "msg",
        "to": "tmp[0]",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "field",
        "pt": "msg",
        "to": "tmp[1]",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "field2",
        "pt": "msg",
        "to": "tmp[2]",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 550,
    "y": 6360,
    "wires": [
      [
        "595d539c1bb100e0"
      ]
    ]
  },
  {
    "id": "595d539c1bb100e0",
    "type": "link call",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "",
    "links": [
      "df0e4ab2e1efc286"
    ],
    "linkType": "static",
    "timeout": "30",
    "x": 740,
    "y": 6360,
    "wires": [
      [
        "160e62d5b3260c7c"
      ]
    ]
  },
  {
    "id": "160e62d5b3260c7c",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "move",
    "rules": [
      {
        "t": "set",
        "p": "measurement",
        "pt": "msg",
        "to": "trans",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "field",
        "pt": "msg",
        "to": "field2",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 930,
    "y": 6360,
    "wires": [
      [
        "4b8667d43dd55dcb"
      ]
    ]
  },
  {
    "id": "4b8667d43dd55dcb",
    "type": "link call",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "",
    "links": [
      "df0e4ab2e1efc286"
    ],
    "linkType": "static",
    "timeout": "30",
    "x": 1120,
    "y": 6360,
    "wires": [
      [
        "feafb2a13eb7aba6"
      ]
    ]
  },
  {
    "id": "78ada15151491066",
    "type": "join",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "",
    "mode": "auto",
    "build": "object",
    "property": "payload",
    "propertyType": "msg",
    "key": "topic",
    "joiner": "\\n",
    "joinerType": "str",
    "accumulate": "false",
    "timeout": "",
    "count": "",
    "reduceRight": false,
    "x": 1470,
    "y": 6420,
    "wires": [
      [
        "b242db668b449c24"
      ]
    ]
  },
  {
    "id": "2a2ca29c5017745d",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "add",
    "rules": [
      {
        "t": "set",
        "p": "del.md5[msg.parts.index]",
        "pt": "flow",
        "to": "{\t    'label':msg.payload.type&' : '&msg.bucket&' / '&msg.measurement&' / '&msg.trans&' (on:'&msg.payload.on&', off:'&msg.payload.off&')',\t    'value':msg.md5\t}",
        "tot": "jsonata"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1310,
    "y": 6420,
    "wires": [
      [
        "78ada15151491066"
      ]
    ]
  },
  {
    "id": "161d87de410f8612",
    "type": "split",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "split scenes",
    "splt": "\\n",
    "spltType": "str",
    "arraySplt": 1,
    "arraySpltType": "len",
    "stream": false,
    "addname": "md5",
    "x": 370,
    "y": 6420,
    "wires": [
      [
        "476328732ceaa3e8"
      ]
    ]
  },
  {
    "id": "075be5218f4a7fd6",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "from global",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "triggers[msg.payload]",
        "tot": "global"
      },
      {
        "t": "set",
        "p": "del.md5",
        "pt": "flow",
        "to": "[]",
        "tot": "json"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 170,
    "y": 6420,
    "wires": [
      [
        "161d87de410f8612"
      ]
    ]
  },
  {
    "id": "476328732ceaa3e8",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "move",
    "rules": [
      {
        "t": "set",
        "p": "tmp",
        "pt": "msg",
        "to": "$split(msg.payload.path,'/')",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "bucket",
        "pt": "msg",
        "to": "tmp[0]",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "field",
        "pt": "msg",
        "to": "tmp[1]",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "field2",
        "pt": "msg",
        "to": "tmp[2]",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 550,
    "y": 6420,
    "wires": [
      [
        "87bd2247fe3acc62"
      ]
    ]
  },
  {
    "id": "87bd2247fe3acc62",
    "type": "link call",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "",
    "links": [
      "df0e4ab2e1efc286"
    ],
    "linkType": "static",
    "timeout": "30",
    "x": 740,
    "y": 6420,
    "wires": [
      [
        "8f5a63bf49aa9299"
      ]
    ]
  },
  {
    "id": "8f5a63bf49aa9299",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "move",
    "rules": [
      {
        "t": "set",
        "p": "measurement",
        "pt": "msg",
        "to": "trans",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "field",
        "pt": "msg",
        "to": "field2",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 930,
    "y": 6420,
    "wires": [
      [
        "739230f415142b7d"
      ]
    ]
  },
  {
    "id": "739230f415142b7d",
    "type": "link call",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "",
    "links": [
      "df0e4ab2e1efc286"
    ],
    "linkType": "static",
    "timeout": "30",
    "x": 1120,
    "y": 6420,
    "wires": [
      [
        "2a2ca29c5017745d"
      ]
    ]
  },
  {
    "id": "b242db668b449c24",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "del.md5",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "$sort(msg.options, function($l, $r) {\t  $l[0].label > $r[0].label\t})",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1640,
    "y": 6420,
    "wires": [
      [
        "13aa9d0fd7bfb031"
      ]
    ]
  },
  {
    "id": "13aa9d0fd7bfb031",
    "type": "ui-dropdown",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "group": "c32053913a6bb245",
    "name": "md5",
    "label": "Scène :",
    "tooltip": "",
    "order": 2,
    "width": "6",
    "height": "1",
    "passthru": false,
    "multiple": false,
    "options": [
      {
        "label": "N/A",
        "value": "",
        "type": "str"
      }
    ],
    "payload": "",
    "topic": "topic",
    "topicType": "msg",
    "className": "",
    "x": 1810,
    "y": 6420,
    "wires": [
      [
        "c277eb1591ca3505"
      ]
    ]
  },
  {
    "id": "c277eb1591ca3505",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "md5",
        "pt": "msg",
        "to": "payload",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1640,
    "y": 6480,
    "wires": [
      [
        "e7b794a92adb0fc0"
      ]
    ]
  },
  {
    "id": "e7b794a92adb0fc0",
    "type": "ui-button",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "group": "c32053913a6bb245",
    "name": "delete",
    "label": "",
    "order": 3,
    "width": "6",
    "height": "1",
    "emulateClick": false,
    "tooltip": "",
    "color": "",
    "bgcolor": "",
    "className": "",
    "icon": "close",
    "iconPosition": "left",
    "payload": "",
    "payloadType": "str",
    "topic": "topic",
    "topicType": "msg",
    "x": 1810,
    "y": 6480,
    "wires": [
      [
        "aaa2bf978d45930d"
      ]
    ]
  },
  {
    "id": "9a8393b8175a1953",
    "type": "delay",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "wait 150 ms",
    "pauseType": "delay",
    "timeout": "150",
    "timeoutUnits": "milliseconds",
    "rate": "1",
    "nbRateUnits": "1",
    "rateUnits": "second",
    "randomFirst": "1",
    "randomLast": "5",
    "randomUnits": "seconds",
    "drop": false,
    "allowrate": false,
    "outputs": 1,
    "x": 1130,
    "y": 6540,
    "wires": [
      [
        "e63dd52ce5b17aeb"
      ]
    ]
  },
  {
    "id": "e63dd52ce5b17aeb",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "set notification metric",
    "rules": [
      {
        "t": "set",
        "p": "bucket",
        "pt": "msg",
        "to": "system",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "measurement",
        "pt": "msg",
        "to": "notification",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "field",
        "pt": "msg",
        "to": "message",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "Déclencheur supprimé",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "repeat",
        "pt": "msg",
        "to": "true",
        "tot": "bool"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1360,
    "y": 6540,
    "wires": [
      [
        "d1d25dc67949b213",
        "a21488eb16a467fa"
      ]
    ]
  },
  {
    "id": "d1d25dc67949b213",
    "type": "debug",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "scenes - delete trigger",
    "active": false,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "md5",
    "targetType": "msg",
    "statusVal": "",
    "statusType": "auto",
    "x": 1620,
    "y": 6540,
    "wires": []
  },
  {
    "id": "a21488eb16a467fa",
    "type": "link out",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "scenes - delete trigger",
    "mode": "link",
    "links": [
      "0d7f6889440560fb",
      "206c1fb4a48067df",
      "2cc720203fa29afe",
      "3664ee38f2da0806",
      "7c98833082d48029",
      "3263d6b1a159b0ff"
    ],
    "x": 1535,
    "y": 6600,
    "wires": []
  },
  {
    "id": "aaa2bf978d45930d",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "from global",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "triggers",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 170,
    "y": 6540,
    "wires": [
      [
        "8f08891f13eb42cf"
      ]
    ]
  },
  {
    "id": "8f08891f13eb42cf",
    "type": "split",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "split triggers",
    "splt": "\\n",
    "spltType": "str",
    "arraySplt": 1,
    "arraySpltType": "len",
    "stream": false,
    "addname": "trigger",
    "x": 370,
    "y": 6540,
    "wires": [
      [
        "841c8fa552e5c988"
      ]
    ]
  },
  {
    "id": "841c8fa552e5c988",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "has md5",
    "property": "payload",
    "propertyType": "msg",
    "rules": [
      {
        "t": "hask",
        "v": "md5",
        "vt": "msg"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 1,
    "x": 560,
    "y": 6540,
    "wires": [
      [
        "a70b23ea1fb58b14"
      ]
    ]
  },
  {
    "id": "6bc8b0dde43bc773",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "delete global",
    "rules": [
      {
        "t": "delete",
        "p": "triggers[msg.trigger][msg.md5]",
        "pt": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 930,
    "y": 6600,
    "wires": [
      [
        "9a8393b8175a1953"
      ]
    ]
  },
  {
    "id": "a70b23ea1fb58b14",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "",
    "property": "$count($keys(msg.payload))",
    "propertyType": "jsonata",
    "rules": [
      {
        "t": "lt",
        "v": "2",
        "vt": "num"
      },
      {
        "t": "else"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 2,
    "x": 740,
    "y": 6540,
    "wires": [
      [
        "81de773ed143c87b"
      ],
      [
        "6bc8b0dde43bc773"
      ]
    ]
  },
  {
    "id": "81de773ed143c87b",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "delete global",
    "rules": [
      {
        "t": "delete",
        "p": "triggers[msg.trigger]",
        "pt": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 930,
    "y": 6540,
    "wires": [
      [
        "9a8393b8175a1953"
      ]
    ]
  },
  {
    "id": "772f392435a3dd17",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "768610170c894620",
    "name": "reload",
    "property": "payload",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "",
        "vt": "str"
      },
      {
        "t": "else"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 2,
    "x": 1990,
    "y": 6360,
    "wires": [
      [
        "7e1540e06576c37e"
      ],
      [
        "075be5218f4a7fd6"
      ]
    ]
  },
  {
    "id": "94f92b94173718ae",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "reload",
    "property": "payload",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "",
        "vt": "str"
      },
      {
        "t": "else"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 2,
    "x": 2050,
    "y": 5140,
    "wires": [
      [
        "c715b34bd8c7144e"
      ],
      [
        "7e331b1381065059"
      ]
    ]
  },
  {
    "id": "464dc2d69be4c4d2",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "19ce5669b4839310",
    "name": "reload",
    "property": "payload",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "",
        "vt": "str"
      },
      {
        "t": "else"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 2,
    "x": 1990,
    "y": 6840,
    "wires": [
      [
        "32f125658d78f3aa"
      ],
      [
        "fbb6b0967cfaf84c"
      ]
    ]
  },
  {
    "id": "82b97ac85ee0461e",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "77a176666a9075c0",
    "name": "reload",
    "property": "payload",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "",
        "vt": "str"
      },
      {
        "t": "else"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 2,
    "x": 1990,
    "y": 4480,
    "wires": [
      [
        "c08574254bd03c3d"
      ],
      [
        "5647d49696914090"
      ]
    ]
  },
  {
    "id": "2caa3526ed6f318d",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "0d183185e153399c",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]actif",
        "tot": "global"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "msg.payload?true:false",
        "tot": "jsonata"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 540,
    "y": 1280,
    "wires": [
      [
        "7cea5f900cc829a2"
      ]
    ]
  },
  {
    "id": "7cea5f900cc829a2",
    "type": "ui-switch",
    "z": "2365e16185f43e03",
    "g": "0d183185e153399c",
    "name": "actif",
    "label": "Actif",
    "group": "86da7af07264458b",
    "order": 34,
    "width": "6",
    "height": "1",
    "passthru": true,
    "topic": "actif",
    "topicType": "str",
    "style": "",
    "className": "",
    "onvalue": "true",
    "onvalueType": "bool",
    "onicon": "",
    "oncolor": "",
    "offvalue": "false",
    "offvalueType": "bool",
    "officon": "",
    "offcolor": "",
    "x": 1170,
    "y": 1280,
    "wires": [
      [
        "7dc2df581430d4d1"
      ]
    ]
  },
  {
    "id": "3b1b60fd4fe7a75d",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "c3b6b0792764609a",
    "name": "format",
    "property": "format",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "dimmer",
        "vt": "str"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 1,
    "x": 850,
    "y": 2360,
    "wires": [
      [
        "72c3e43d1bd7d71e",
        "d0562d12417ddbcd"
      ]
    ]
  },
  {
    "id": "0b77f4879755cf4a",
    "type": "md5",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "",
    "fieldToHash": "md5",
    "fieldTypeToHash": "msg",
    "hashField": "md5",
    "hashFieldType": "msg",
    "x": 2390,
    "y": 6180,
    "wires": [
      [
        "7d84766600c7d5a9"
      ]
    ]
  },
  {
    "id": "c640900fa4f67a47",
    "type": "json",
    "z": "2365e16185f43e03",
    "g": "ba3f7159e9c41676",
    "name": "",
    "property": "md5",
    "action": "str",
    "pretty": true,
    "x": 2230,
    "y": 6180,
    "wires": [
      [
        "0b77f4879755cf4a"
      ]
    ]
  },
  {
    "id": "9c3c4a7cb6430948",
    "type": "link in",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "scenes - delete scene",
    "links": [
      "8d98777b03b2341f",
      "d7f64b57a1fb0517",
      "43166899a8759ba8",
      "9635cf6ffe5f5df1"
    ],
    "x": 1495,
    "y": 3940,
    "wires": [
      [
        "30c14a02c0f6f44c"
      ]
    ]
  },
  {
    "id": "30c14a02c0f6f44c",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "reset",
    "rules": [
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "remove",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "bucket",
        "pt": "msg"
      },
      {
        "t": "delete",
        "p": "measurement",
        "pt": "msg"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      },
      {
        "t": "delete",
        "p": "options",
        "pt": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1630,
    "y": 3940,
    "wires": [
      [
        "0a7482cc6cdd853f",
        "5d78a0715292c3c2",
        "9ead5bc677f88efe",
        "272f978cb81b3211"
      ]
    ]
  },
  {
    "id": "0a7482cc6cdd853f",
    "type": "delay",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "",
    "pauseType": "delay",
    "timeout": "100",
    "timeoutUnits": "milliseconds",
    "rate": "1",
    "nbRateUnits": "1",
    "rateUnits": "second",
    "randomFirst": "1",
    "randomLast": "5",
    "randomUnits": "seconds",
    "drop": false,
    "allowrate": false,
    "outputs": 1,
    "x": 1810,
    "y": 3940,
    "wires": [
      [
        "40b4d19bc941757b"
      ]
    ]
  },
  {
    "id": "40b4d19bc941757b",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "from global",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes",
        "tot": "global"
      },
      {
        "t": "set",
        "p": "list.types",
        "pt": "flow",
        "to": "[]",
        "tot": "json"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 170,
    "y": 4000,
    "wires": [
      [
        "7f2170d4bb4d440a"
      ]
    ]
  },
  {
    "id": "7f2170d4bb4d440a",
    "type": "split",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "split types",
    "splt": "\\n",
    "spltType": "str",
    "arraySplt": 1,
    "arraySpltType": "len",
    "stream": false,
    "addname": "type",
    "x": 360,
    "y": 4000,
    "wires": [
      [
        "2ff8057143b92a16"
      ]
    ]
  },
  {
    "id": "2ff8057143b92a16",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "add",
    "rules": [
      {
        "t": "set",
        "p": "type",
        "pt": "msg",
        "to": "{\t    \"label\":msg.type,\t    \"value\":msg.type\t    }",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "types",
        "pt": "msg",
        "to": "list.types",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "list.types",
        "pt": "flow",
        "to": "$append(msg.types,msg.type)",
        "tot": "jsonata"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1310,
    "y": 4000,
    "wires": [
      [
        "8350a6fe02a6fcc9"
      ]
    ]
  },
  {
    "id": "8350a6fe02a6fcc9",
    "type": "join",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "",
    "mode": "auto",
    "build": "object",
    "property": "payload",
    "propertyType": "msg",
    "key": "topic",
    "joiner": "\\n",
    "joinerType": "str",
    "accumulate": true,
    "timeout": "",
    "count": "",
    "reduceRight": false,
    "reduceExp": "",
    "reduceInit": "",
    "reduceInitType": "",
    "reduceFixup": "",
    "x": 1470,
    "y": 4000,
    "wires": [
      [
        "3e66e02f29a82d4a"
      ]
    ]
  },
  {
    "id": "3e66e02f29a82d4a",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "list.types",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "$sort(msg.options, function($l, $r) {\t  $l[0].label > $r[0].label\t})",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "$append(msg.options,[{'label':'» recharger','value':''}])",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1640,
    "y": 4000,
    "wires": [
      [
        "5d78a0715292c3c2"
      ]
    ]
  },
  {
    "id": "5d78a0715292c3c2",
    "type": "ui-dropdown",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "group": "1834253e93442bc8",
    "name": "scenes types",
    "label": "Type de scène :",
    "tooltip": "",
    "order": 1,
    "width": "6",
    "height": "1",
    "passthru": false,
    "multiple": false,
    "options": [
      {
        "label": "» recharger",
        "value": "",
        "type": "str"
      }
    ],
    "payload": "",
    "topic": "topic",
    "topicType": "msg",
    "className": "",
    "x": 1830,
    "y": 4000,
    "wires": [
      [
        "b6cbee8201e44c52"
      ]
    ]
  },
  {
    "id": "b6cbee8201e44c52",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "reload",
    "property": "payload",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "",
        "vt": "str"
      },
      {
        "t": "else"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 2,
    "x": 1990,
    "y": 4000,
    "wires": [
      [
        "30c14a02c0f6f44c"
      ],
      [
        "d64496badea11c6f"
      ]
    ]
  },
  {
    "id": "d64496badea11c6f",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "from global",
    "rules": [
      {
        "t": "set",
        "p": "scene_type",
        "pt": "msg",
        "to": "payload",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.payload]",
        "tot": "global"
      },
      {
        "t": "set",
        "p": "list.deletescenes",
        "pt": "flow",
        "to": "[]",
        "tot": "json"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 170,
    "y": 4060,
    "wires": [
      [
        "0ac636db144a9397"
      ]
    ]
  },
  {
    "id": "0ac636db144a9397",
    "type": "split",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "split scenes",
    "splt": "\\n",
    "spltType": "str",
    "arraySplt": 1,
    "arraySpltType": "len",
    "stream": false,
    "addname": "type",
    "x": 370,
    "y": 4060,
    "wires": [
      [
        "f9d3e83b4c3b52ab"
      ]
    ]
  },
  {
    "id": "f9d3e83b4c3b52ab",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "move",
    "rules": [
      {
        "t": "set",
        "p": "tmp",
        "pt": "msg",
        "to": "$split(msg.payload.path,'/')",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "bucket",
        "pt": "msg",
        "to": "tmp[0]",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "field",
        "pt": "msg",
        "to": "tmp[1]",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "field2",
        "pt": "msg",
        "to": "tmp[2]",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 550,
    "y": 4060,
    "wires": [
      [
        "877b1f7344ccaf70"
      ]
    ]
  },
  {
    "id": "877b1f7344ccaf70",
    "type": "link call",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "",
    "links": [
      "df0e4ab2e1efc286"
    ],
    "linkType": "static",
    "timeout": "30",
    "x": 740,
    "y": 4060,
    "wires": [
      [
        "e4a004f86ff46aff"
      ]
    ]
  },
  {
    "id": "e4a004f86ff46aff",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "move",
    "rules": [
      {
        "t": "set",
        "p": "measurement",
        "pt": "msg",
        "to": "field",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "trans_measurement",
        "pt": "msg",
        "to": "trans",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "field",
        "pt": "msg",
        "to": "field2",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 930,
    "y": 4060,
    "wires": [
      [
        "a136f953ea376b1d"
      ]
    ]
  },
  {
    "id": "a136f953ea376b1d",
    "type": "link call",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "",
    "links": [
      "df0e4ab2e1efc286"
    ],
    "linkType": "static",
    "timeout": "30",
    "x": 1120,
    "y": 4060,
    "wires": [
      [
        "fb6eb587f18161c1"
      ]
    ]
  },
  {
    "id": "fb6eb587f18161c1",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "add",
    "rules": [
      {
        "t": "delete",
        "p": "payload.type",
        "pt": "msg"
      },
      {
        "t": "delete",
        "p": "payload.response",
        "pt": "msg"
      },
      {
        "t": "set",
        "p": "list.deletescenes[msg.parts.index]",
        "pt": "flow",
        "to": "{\t    \"label\":msg.bucket&' / '&msg.trans_measurement&' / '&msg.trans,\t    \"value\":msg.bucket&'/'&msg.measurement&'/'&msg.field\t    }",
        "tot": "jsonata"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1310,
    "y": 4060,
    "wires": [
      [
        "602a5ab8762865d1"
      ]
    ]
  },
  {
    "id": "602a5ab8762865d1",
    "type": "join",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "",
    "mode": "auto",
    "build": "object",
    "property": "payload",
    "propertyType": "msg",
    "key": "topic",
    "joiner": "\\n",
    "joinerType": "str",
    "accumulate": "false",
    "timeout": "",
    "count": "",
    "reduceRight": false,
    "x": 1470,
    "y": 4060,
    "wires": [
      [
        "67c7aaf0ff7fab34"
      ]
    ]
  },
  {
    "id": "67c7aaf0ff7fab34",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "list.deletescenes",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "$sort(msg.options, function($l, $r) {\t  $l[0].label > $r[0].label\t})",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1640,
    "y": 4060,
    "wires": [
      [
        "9ead5bc677f88efe"
      ]
    ]
  },
  {
    "id": "9ead5bc677f88efe",
    "type": "ui-dropdown",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "group": "1834253e93442bc8",
    "name": "scene path",
    "label": "Chemin de la scène :",
    "tooltip": "",
    "order": 2,
    "width": "6",
    "height": "1",
    "passthru": false,
    "multiple": false,
    "options": [
      {
        "label": "non assigné",
        "value": "",
        "type": "str"
      }
    ],
    "payload": "",
    "topic": "topic",
    "topicType": "msg",
    "className": "",
    "x": 1830,
    "y": 4060,
    "wires": [
      [
        "c8b9c27367760c26"
      ]
    ]
  },
  {
    "id": "272f978cb81b3211",
    "type": "ui-button",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "group": "1834253e93442bc8",
    "name": "delete",
    "label": "",
    "order": 3,
    "width": "6",
    "height": "1",
    "emulateClick": false,
    "tooltip": "",
    "color": "",
    "bgcolor": "",
    "className": "",
    "icon": "close",
    "iconPosition": "left",
    "payload": "",
    "payloadType": "str",
    "topic": "topic",
    "topicType": "msg",
    "x": 1810,
    "y": 4120,
    "wires": [
      [
        "93217e0ac33a366c"
      ]
    ]
  },
  {
    "id": "93217e0ac33a366c",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "from global",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "triggers",
        "tot": "global"
      },
      {
        "t": "delete",
        "p": "scenes[msg.scene_type][msg.scene]",
        "pt": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 170,
    "y": 4180,
    "wires": [
      [
        "4ac9c6a1b0a30d5a"
      ]
    ]
  },
  {
    "id": "c8b9c27367760c26",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "scene",
        "pt": "msg",
        "to": "payload",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1640,
    "y": 4120,
    "wires": [
      [
        "272f978cb81b3211"
      ]
    ]
  },
  {
    "id": "4ac9c6a1b0a30d5a",
    "type": "split",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "split triggers",
    "splt": "\\n",
    "spltType": "str",
    "arraySplt": 1,
    "arraySpltType": "len",
    "stream": false,
    "addname": "trigger",
    "x": 370,
    "y": 4180,
    "wires": [
      [
        "7acc5347e55f2e72"
      ]
    ]
  },
  {
    "id": "7acc5347e55f2e72",
    "type": "split",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "split md5",
    "splt": "\\n",
    "spltType": "str",
    "arraySplt": 1,
    "arraySpltType": "len",
    "stream": false,
    "addname": "md5",
    "x": 560,
    "y": 4180,
    "wires": [
      [
        "239125f620dff4e7"
      ]
    ]
  },
  {
    "id": "239125f620dff4e7",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "path",
    "property": "payload.path",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "scene",
        "vt": "msg"
      },
      {
        "t": "else"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 2,
    "x": 730,
    "y": 4240,
    "wires": [
      [
        "83d00933c4468207"
      ],
      [
        "0913162f8b198348"
      ]
    ]
  },
  {
    "id": "83d00933c4468207",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "delete trigger",
    "rules": [
      {
        "t": "delete",
        "p": "triggers[msg.trigger][msg.md5]",
        "pt": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 910,
    "y": 4180,
    "wires": [
      [
        "0913162f8b198348"
      ]
    ]
  },
  {
    "id": "0913162f8b198348",
    "type": "join",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "",
    "mode": "auto",
    "build": "object",
    "property": "payload",
    "propertyType": "msg",
    "key": "topic",
    "joiner": "\\n",
    "joinerType": "str",
    "accumulate": "false",
    "timeout": "",
    "count": "",
    "reduceRight": false,
    "x": 1090,
    "y": 4240,
    "wires": [
      [
        "149e032cefd16ade"
      ]
    ]
  },
  {
    "id": "149e032cefd16ade",
    "type": "join",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "",
    "mode": "auto",
    "build": "object",
    "property": "payload",
    "propertyType": "msg",
    "key": "topic",
    "joiner": "\\n",
    "joinerType": "str",
    "accumulate": "false",
    "timeout": "",
    "count": "",
    "reduceRight": false,
    "x": 1250,
    "y": 4240,
    "wires": [
      [
        "5e78b5bb6e312f78"
      ]
    ]
  },
  {
    "id": "5e78b5bb6e312f78",
    "type": "delay",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "wait 150 ms",
    "pauseType": "delay",
    "timeout": "150",
    "timeoutUnits": "milliseconds",
    "rate": "1",
    "nbRateUnits": "1",
    "rateUnits": "second",
    "randomFirst": "1",
    "randomLast": "5",
    "randomUnits": "seconds",
    "drop": false,
    "allowrate": false,
    "outputs": 1,
    "x": 1430,
    "y": 4240,
    "wires": [
      [
        "26785f8d855e5ba6"
      ]
    ]
  },
  {
    "id": "26785f8d855e5ba6",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "set notification metric",
    "rules": [
      {
        "t": "set",
        "p": "bucket",
        "pt": "msg",
        "to": "system",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "measurement",
        "pt": "msg",
        "to": "notification",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "field",
        "pt": "msg",
        "to": "message",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "Scène supprimée",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "repeat",
        "pt": "msg",
        "to": "true",
        "tot": "bool"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1660,
    "y": 4240,
    "wires": [
      [
        "6c449a3408acee90",
        "d7f64b57a1fb0517"
      ]
    ]
  },
  {
    "id": "6c449a3408acee90",
    "type": "debug",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "scenes - delete scene",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "true",
    "targetType": "full",
    "statusVal": "",
    "statusType": "auto",
    "x": 1920,
    "y": 4180,
    "wires": []
  },
  {
    "id": "d7f64b57a1fb0517",
    "type": "link out",
    "z": "2365e16185f43e03",
    "g": "55a7f287721494a0",
    "name": "scenes - delete scene",
    "mode": "link",
    "links": [
      "206c1fb4a48067df",
      "251f1801fba21ab0",
      "9c3c4a7cb6430948",
      "d2ca5cbd23e2cf88",
      "3214c7c1cc0f2f6f"
    ],
    "x": 1835,
    "y": 4240,
    "wires": []
  },
  {
    "id": "53a481fea28e6249",
    "type": "ui-button",
    "z": "2365e16185f43e03",
    "g": "e6436a8697d9ab89",
    "group": "a62fb8e0d132955e",
    "name": "reload",
    "label": "",
    "order": 1,
    "width": "6",
    "height": "1",
    "emulateClick": false,
    "tooltip": "",
    "color": "",
    "bgcolor": "",
    "className": "",
    "icon": "reload",
    "iconPosition": "left",
    "payload": "",
    "payloadType": "str",
    "topic": "topic",
    "topicType": "msg",
    "x": 150,
    "y": 4780,
    "wires": [
      [
        "958736f2da5c8819"
      ]
    ]
  },
  {
    "id": "3b9388e0f23ff779",
    "type": "ui-button",
    "z": "2365e16185f43e03",
    "g": "e6436a8697d9ab89",
    "group": "a62fb8e0d132955e",
    "name": "import",
    "label": "",
    "order": 3,
    "width": "6",
    "height": "1",
    "emulateClick": false,
    "tooltip": "",
    "color": "",
    "bgcolor": "",
    "className": "",
    "icon": "plus",
    "iconPosition": "left",
    "payload": "",
    "payloadType": "str",
    "topic": "topic",
    "topicType": "msg",
    "x": 150,
    "y": 4840,
    "wires": [
      [
        "bef5ab6442d83bbf"
      ]
    ]
  },
  {
    "id": "958736f2da5c8819",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "e6436a8697d9ab89",
    "name": "from global",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes",
        "tot": "global"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "$string(msg.payload, true)",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "import.scenes",
        "pt": "flow",
        "to": "{}",
        "tot": "jsonata"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 330,
    "y": 4780,
    "wires": [
      [
        "6d4a931be23710cc"
      ]
    ]
  },
  {
    "id": "6d4a931be23710cc",
    "type": "ui-text-input",
    "z": "2365e16185f43e03",
    "g": "e6436a8697d9ab89",
    "group": "a62fb8e0d132955e",
    "name": "scenes content",
    "label": "",
    "order": 2,
    "width": "6",
    "height": "3",
    "topic": "topic",
    "topicType": "msg",
    "mode": "textarea",
    "delay": 300,
    "passthru": true,
    "sendOnDelay": false,
    "sendOnBlur": true,
    "sendOnEnter": true,
    "className": "",
    "x": 540,
    "y": 4780,
    "wires": [
      [
        "520e9f66eace001e"
      ]
    ]
  },
  {
    "id": "520e9f66eace001e",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "e6436a8697d9ab89",
    "name": "to flow",
    "rules": [
      {
        "t": "set",
        "p": "import.scenes.content",
        "pt": "flow",
        "to": "payload",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 730,
    "y": 4780,
    "wires": [
      []
    ]
  },
  {
    "id": "bef5ab6442d83bbf",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "e6436a8697d9ab89",
    "name": "from flow",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "import.scenes.content",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "import.scenes.message",
        "pt": "flow",
        "to": "Scènes importé avec succès",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "scene",
        "pt": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 320,
    "y": 4840,
    "wires": [
      [
        "97f9e55756ff6676"
      ]
    ]
  },
  {
    "id": "97f9e55756ff6676",
    "type": "json",
    "z": "2365e16185f43e03",
    "g": "e6436a8697d9ab89",
    "name": "",
    "property": "payload",
    "action": "obj",
    "pretty": false,
    "x": 490,
    "y": 4840,
    "wires": [
      [
        "f41474a7c0413436"
      ]
    ]
  },
  {
    "id": "3214c7c1cc0f2f6f",
    "type": "link in",
    "z": "2365e16185f43e03",
    "g": "e6436a8697d9ab89",
    "name": "scenes - import export scene",
    "links": [
      "d92386370d84c100",
      "d7f64b57a1fb0517",
      "43166899a8759ba8"
    ],
    "x": 185,
    "y": 4720,
    "wires": [
      [
        "958736f2da5c8819"
      ]
    ]
  },
  {
    "id": "f41474a7c0413436",
    "type": "split",
    "z": "2365e16185f43e03",
    "g": "e6436a8697d9ab89",
    "name": "split type",
    "splt": "\\n",
    "spltType": "str",
    "arraySplt": 1,
    "arraySpltType": "len",
    "stream": false,
    "addname": "type",
    "x": 660,
    "y": 4840,
    "wires": [
      [
        "55b514867cc57453"
      ]
    ]
  },
  {
    "id": "55b514867cc57453",
    "type": "split",
    "z": "2365e16185f43e03",
    "g": "e6436a8697d9ab89",
    "name": "split path",
    "splt": "\\n",
    "spltType": "str",
    "arraySplt": 1,
    "arraySpltType": "len",
    "stream": false,
    "addname": "path",
    "x": 840,
    "y": 4840,
    "wires": [
      [
        "a1dc3da3138ba471"
      ]
    ]
  },
  {
    "id": "a1dc3da3138ba471",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "e6436a8697d9ab89",
    "name": "split metric",
    "rules": [
      {
        "t": "set",
        "p": "tmp",
        "pt": "msg",
        "to": "$split(msg.path,'/')",
        "tot": "jsonata"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1030,
    "y": 4840,
    "wires": [
      [
        "03d6c2dca518cd6c"
      ]
    ]
  },
  {
    "id": "03d6c2dca518cd6c",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "e6436a8697d9ab89",
    "name": "metric exists",
    "property": "metrics[msg.tmp[0]][msg.tmp[1]]",
    "propertyType": "global",
    "rules": [
      {
        "t": "hask",
        "v": "tmp[2]",
        "vt": "msg"
      },
      {
        "t": "else"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 2,
    "x": 1230,
    "y": 4840,
    "wires": [
      [
        "0bf124ea6478968e"
      ],
      [
        "eaa3f051c198b9de"
      ]
    ]
  },
  {
    "id": "0bf124ea6478968e",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "e6436a8697d9ab89",
    "name": "to global",
    "rules": [
      {
        "t": "set",
        "p": "scene",
        "pt": "msg",
        "to": "payload",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "scene.type",
        "pt": "msg",
        "to": "type",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "scene.path",
        "pt": "msg",
        "to": "path",
        "tot": "msg"
      },
      {
        "t": "delete",
        "p": "scene.response",
        "pt": "msg"
      },
      {
        "t": "set",
        "p": "scenes[msg.scene.type][msg.scene.path]",
        "pt": "global",
        "to": "scene",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1420,
    "y": 4780,
    "wires": [
      [
        "52b0cc774f439302"
      ]
    ]
  },
  {
    "id": "eaa3f051c198b9de",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "e6436a8697d9ab89",
    "name": "message",
    "rules": [
      {
        "t": "set",
        "p": "import.scenes.message",
        "pt": "flow",
        "to": "Une scène n'a pas pu être importé",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1420,
    "y": 4840,
    "wires": [
      [
        "52b0cc774f439302"
      ]
    ]
  },
  {
    "id": "52b0cc774f439302",
    "type": "join",
    "z": "2365e16185f43e03",
    "g": "e6436a8697d9ab89",
    "name": "",
    "mode": "auto",
    "build": "object",
    "property": "payload",
    "propertyType": "msg",
    "key": "topic",
    "joiner": "\\n",
    "joinerType": "str",
    "accumulate": "false",
    "timeout": "",
    "count": "",
    "reduceRight": false,
    "x": 1590,
    "y": 4840,
    "wires": [
      [
        "f76cec2087f5d1e2"
      ]
    ]
  },
  {
    "id": "f76cec2087f5d1e2",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "e6436a8697d9ab89",
    "name": "set notification metric",
    "rules": [
      {
        "t": "set",
        "p": "bucket",
        "pt": "msg",
        "to": "system",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "measurement",
        "pt": "msg",
        "to": "notification",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "field",
        "pt": "msg",
        "to": "message",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "import.scenes.message",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "repeat",
        "pt": "msg",
        "to": "true",
        "tot": "bool"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1800,
    "y": 4840,
    "wires": [
      [
        "458d90e34479960c",
        "9635cf6ffe5f5df1"
      ]
    ]
  },
  {
    "id": "458d90e34479960c",
    "type": "debug",
    "z": "2365e16185f43e03",
    "g": "e6436a8697d9ab89",
    "name": "scenes - import export scene",
    "active": false,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "scene",
    "targetType": "msg",
    "statusVal": "",
    "statusType": "auto",
    "x": 2080,
    "y": 4780,
    "wires": []
  },
  {
    "id": "9635cf6ffe5f5df1",
    "type": "link out",
    "z": "2365e16185f43e03",
    "g": "e6436a8697d9ab89",
    "name": "scenes - import export scene",
    "mode": "link",
    "links": [
      "206c1fb4a48067df",
      "251f1801fba21ab0",
      "9c3c4a7cb6430948",
      "d2ca5cbd23e2cf88"
    ],
    "x": 1975,
    "y": 4840,
    "wires": []
  },
  {
    "id": "a3febe192ff0e350",
    "type": "ui-button",
    "z": "2365e16185f43e03",
    "g": "62f311d43397df29",
    "group": "6deb4e8479d0818e",
    "name": "reload",
    "label": "",
    "order": 1,
    "width": "6",
    "height": "1",
    "emulateClick": false,
    "tooltip": "",
    "color": "",
    "bgcolor": "",
    "className": "",
    "icon": "reload",
    "iconPosition": "left",
    "payload": "",
    "payloadType": "str",
    "topic": "topic",
    "topicType": "msg",
    "x": 150,
    "y": 7140,
    "wires": [
      [
        "79ad5f668b24679c"
      ]
    ]
  },
  {
    "id": "7115d9982b314618",
    "type": "ui-button",
    "z": "2365e16185f43e03",
    "g": "62f311d43397df29",
    "group": "6deb4e8479d0818e",
    "name": "import",
    "label": "",
    "order": 3,
    "width": "6",
    "height": "1",
    "emulateClick": false,
    "tooltip": "",
    "color": "",
    "bgcolor": "",
    "className": "",
    "icon": "plus",
    "iconPosition": "left",
    "payload": "",
    "payloadType": "str",
    "topic": "topic",
    "topicType": "msg",
    "x": 150,
    "y": 7200,
    "wires": [
      [
        "ae1b070d9513420f"
      ]
    ]
  },
  {
    "id": "ae1b070d9513420f",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "62f311d43397df29",
    "name": "from flow",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "import.triggers.content",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "import.triggers.message",
        "pt": "flow",
        "to": "Déclencheurs importé avec succès",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "trigger",
        "pt": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 320,
    "y": 7200,
    "wires": [
      [
        "f06ff4146bf015e0"
      ]
    ]
  },
  {
    "id": "79ad5f668b24679c",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "62f311d43397df29",
    "name": "from global",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "triggers",
        "tot": "global"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "$string(msg.payload, true)",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "import.triggers",
        "pt": "flow",
        "to": "{}",
        "tot": "jsonata"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 330,
    "y": 7140,
    "wires": [
      [
        "860477dbbd58b587"
      ]
    ]
  },
  {
    "id": "860477dbbd58b587",
    "type": "ui-text-input",
    "z": "2365e16185f43e03",
    "g": "62f311d43397df29",
    "group": "6deb4e8479d0818e",
    "name": "triggers content",
    "label": "",
    "order": 2,
    "width": "6",
    "height": "3",
    "topic": "topic",
    "topicType": "msg",
    "mode": "textarea",
    "delay": 300,
    "passthru": true,
    "sendOnDelay": false,
    "sendOnBlur": true,
    "sendOnEnter": true,
    "className": "",
    "x": 540,
    "y": 7140,
    "wires": [
      [
        "fcc5ebf1cf66f1ba"
      ]
    ]
  },
  {
    "id": "fcc5ebf1cf66f1ba",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "62f311d43397df29",
    "name": "to flow",
    "rules": [
      {
        "t": "set",
        "p": "import.triggers.content",
        "pt": "flow",
        "to": "payload",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 730,
    "y": 7140,
    "wires": [
      []
    ]
  },
  {
    "id": "f06ff4146bf015e0",
    "type": "json",
    "z": "2365e16185f43e03",
    "g": "62f311d43397df29",
    "name": "",
    "property": "payload",
    "action": "obj",
    "pretty": false,
    "x": 490,
    "y": 7200,
    "wires": [
      [
        "ab92b4e884625b66"
      ]
    ]
  },
  {
    "id": "ab92b4e884625b66",
    "type": "split",
    "z": "2365e16185f43e03",
    "g": "62f311d43397df29",
    "name": "split trigger",
    "splt": "\\n",
    "spltType": "str",
    "arraySplt": 1,
    "arraySpltType": "len",
    "stream": false,
    "addname": "trigger",
    "x": 670,
    "y": 7200,
    "wires": [
      [
        "d351a3cbef1355a1"
      ]
    ]
  },
  {
    "id": "d9e7fdd4b2064d1f",
    "type": "split",
    "z": "2365e16185f43e03",
    "g": "62f311d43397df29",
    "name": "split md5",
    "splt": "\\n",
    "spltType": "str",
    "arraySplt": 1,
    "arraySpltType": "len",
    "stream": false,
    "addname": "md5",
    "x": 1260,
    "y": 7140,
    "wires": [
      [
        "1645bbe018d66145"
      ]
    ]
  },
  {
    "id": "9bee7aa2fd078097",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "62f311d43397df29",
    "name": "metric exists",
    "property": "metrics[msg.tmp[0]][msg.tmp[1]]",
    "propertyType": "global",
    "rules": [
      {
        "t": "hask",
        "v": "tmp[2]",
        "vt": "msg"
      },
      {
        "t": "else"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 2,
    "x": 1070,
    "y": 7200,
    "wires": [
      [
        "d9e7fdd4b2064d1f"
      ],
      [
        "5279e5dbd0cd1b08"
      ]
    ]
  },
  {
    "id": "d351a3cbef1355a1",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "62f311d43397df29",
    "name": "split trigger",
    "rules": [
      {
        "t": "set",
        "p": "tmp",
        "pt": "msg",
        "to": "$split(msg.trigger,'/')",
        "tot": "jsonata"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 870,
    "y": 7200,
    "wires": [
      [
        "9bee7aa2fd078097"
      ]
    ]
  },
  {
    "id": "1645bbe018d66145",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "62f311d43397df29",
    "name": "split path",
    "rules": [
      {
        "t": "set",
        "p": "tmp",
        "pt": "msg",
        "to": "$split(msg.payload.path,'/')",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "md5",
        "pt": "msg",
        "to": "payload",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1440,
    "y": 7140,
    "wires": [
      [
        "67040f324dd5eda2"
      ]
    ]
  },
  {
    "id": "67040f324dd5eda2",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "62f311d43397df29",
    "name": "metric exists",
    "property": "metrics[msg.tmp[0]][msg.tmp[1]]",
    "propertyType": "global",
    "rules": [
      {
        "t": "hask",
        "v": "tmp[2]",
        "vt": "msg"
      },
      {
        "t": "else"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 2,
    "x": 1630,
    "y": 7140,
    "wires": [
      [
        "c77a886f99e247b6"
      ],
      [
        "7a051a6f4f35abc8"
      ]
    ]
  },
  {
    "id": "2bbb2ae05167c591",
    "type": "md5",
    "z": "2365e16185f43e03",
    "g": "62f311d43397df29",
    "name": "",
    "fieldToHash": "md5",
    "fieldTypeToHash": "msg",
    "hashField": "md5",
    "hashFieldType": "msg",
    "x": 1970,
    "y": 7080,
    "wires": [
      [
        "e6aaca278df20666"
      ]
    ]
  },
  {
    "id": "e6aaca278df20666",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "62f311d43397df29",
    "name": "to global",
    "rules": [
      {
        "t": "set",
        "p": "triggers[msg.trigger][msg.md5]",
        "pt": "global",
        "to": "payload",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 2140,
    "y": 7080,
    "wires": [
      [
        "954786b6d749db39"
      ]
    ]
  },
  {
    "id": "06c3aeb3acba71e8",
    "type": "debug",
    "z": "2365e16185f43e03",
    "g": "62f311d43397df29",
    "name": "scenes - import export trigger",
    "active": false,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "payload",
    "targetType": "msg",
    "statusVal": "",
    "statusType": "auto",
    "x": 2960,
    "y": 7140,
    "wires": []
  },
  {
    "id": "4d787b54987fe0b5",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "62f311d43397df29",
    "name": "set notification metric",
    "rules": [
      {
        "t": "set",
        "p": "bucket",
        "pt": "msg",
        "to": "system",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "measurement",
        "pt": "msg",
        "to": "notification",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "field",
        "pt": "msg",
        "to": "message",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "import.triggers.message",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "repeat",
        "pt": "msg",
        "to": "true",
        "tot": "bool"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 2680,
    "y": 7200,
    "wires": [
      [
        "06c3aeb3acba71e8",
        "30b864529ddd7036"
      ]
    ]
  },
  {
    "id": "954786b6d749db39",
    "type": "join",
    "z": "2365e16185f43e03",
    "g": "62f311d43397df29",
    "name": "",
    "mode": "auto",
    "build": "object",
    "property": "payload",
    "propertyType": "msg",
    "key": "topic",
    "joiner": "\\n",
    "joinerType": "str",
    "accumulate": "false",
    "timeout": "",
    "count": "",
    "reduceRight": false,
    "x": 2310,
    "y": 7140,
    "wires": [
      [
        "1e5bc4b34e21f8e5"
      ]
    ]
  },
  {
    "id": "5279e5dbd0cd1b08",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "62f311d43397df29",
    "name": "message",
    "rules": [
      {
        "t": "set",
        "p": "import.triggers.message",
        "pt": "flow",
        "to": "Un déclencheur n'a pas pu être importé",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1260,
    "y": 7200,
    "wires": [
      [
        "1e5bc4b34e21f8e5"
      ]
    ]
  },
  {
    "id": "7a051a6f4f35abc8",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "62f311d43397df29",
    "name": "message",
    "rules": [
      {
        "t": "set",
        "p": "import.triggers.message",
        "pt": "flow",
        "to": "Un déclencheur n'a pas pu être importé",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1820,
    "y": 7140,
    "wires": [
      [
        "954786b6d749db39"
      ]
    ]
  },
  {
    "id": "1e5bc4b34e21f8e5",
    "type": "join",
    "z": "2365e16185f43e03",
    "g": "62f311d43397df29",
    "name": "",
    "mode": "auto",
    "build": "object",
    "property": "payload",
    "propertyType": "msg",
    "key": "topic",
    "joiner": "\\n",
    "joinerType": "str",
    "accumulate": "false",
    "timeout": "",
    "count": "",
    "reduceRight": false,
    "x": 2470,
    "y": 7200,
    "wires": [
      [
        "4d787b54987fe0b5"
      ]
    ]
  },
  {
    "id": "3263d6b1a159b0ff",
    "type": "link in",
    "z": "2365e16185f43e03",
    "g": "62f311d43397df29",
    "name": "scenes - import export triggers",
    "links": [
      "d92386370d84c100",
      "a21488eb16a467fa",
      "d32dc8a93d1ac3ad",
      "30b864529ddd7036"
    ],
    "x": 185,
    "y": 7080,
    "wires": [
      [
        "79ad5f668b24679c"
      ]
    ]
  },
  {
    "id": "30b864529ddd7036",
    "type": "link out",
    "z": "2365e16185f43e03",
    "g": "62f311d43397df29",
    "name": "scenes - import export triggers",
    "mode": "link",
    "links": [
      "0d7f6889440560fb",
      "206c1fb4a48067df",
      "2cc720203fa29afe",
      "3263d6b1a159b0ff",
      "3664ee38f2da0806"
    ],
    "x": 2855,
    "y": 7200,
    "wires": []
  },
  {
    "id": "c77a886f99e247b6",
    "type": "json",
    "z": "2365e16185f43e03",
    "g": "62f311d43397df29",
    "name": "",
    "property": "md5",
    "action": "",
    "pretty": false,
    "x": 1810,
    "y": 7080,
    "wires": [
      [
        "2bbb2ae05167c591"
      ]
    ]
  },
  {
    "id": "3b26932b59001243",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "c3b6b0792764609a",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]retention",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1010,
    "y": 2240,
    "wires": [
      [
        "2e2979bb6dcc6553"
      ]
    ]
  },
  {
    "id": "2e2979bb6dcc6553",
    "type": "ui-switch",
    "z": "2365e16185f43e03",
    "g": "c3b6b0792764609a",
    "name": "retention",
    "label": "Rétention",
    "group": "86da7af07264458b",
    "order": 21,
    "width": "6",
    "height": "1",
    "passthru": true,
    "topic": "retention",
    "topicType": "str",
    "style": "",
    "className": "",
    "onvalue": "true",
    "onvalueType": "bool",
    "onicon": "",
    "oncolor": "",
    "offvalue": "false",
    "offvalueType": "bool",
    "officon": "",
    "offcolor": "",
    "x": 1180,
    "y": 2240,
    "wires": [
      [
        "b0d65e1138250625"
      ]
    ]
  },
  {
    "id": "7716fc16ed250b25",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "shading metrics limit",
    "rules": [
      {
        "t": "set",
        "p": "limit.bucket",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "limit.measurement",
        "pt": "msg",
        "to": "aperture",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "limit.field",
        "pt": "msg",
        "to": "shutter",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 540,
    "y": 480,
    "wires": [
      [
        "72ffa082cbdc1b9d"
      ]
    ]
  },
  {
    "id": "934dc60f940169b5",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "clone metrics limit",
    "rules": [
      {
        "t": "set",
        "p": "limit.bucket",
        "pt": "msg",
        "to": "^((?!system|room|thermostat|agenda|home).)*$",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "limit.measurement",
        "pt": "msg",
        "to": "^((?!clock|shading|battery|seen|heat).)*$",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "limit.field",
        "pt": "msg",
        "to": "",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 530,
    "y": 900,
    "wires": [
      [
        "72ffa082cbdc1b9d"
      ]
    ]
  },
  {
    "id": "f50307318be3d784",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "airflow metrics limit",
    "rules": [
      {
        "t": "set",
        "p": "limit.bucket",
        "pt": "msg",
        "to": "^((?!system|room|thermostat|agenda|home).)*$",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "limit.measurement",
        "pt": "msg",
        "to": "airflow",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "limit.field",
        "pt": "msg",
        "to": "",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 530,
    "y": 540,
    "wires": [
      [
        "72ffa082cbdc1b9d"
      ]
    ]
  },
  {
    "id": "9f397c7d7826bf47",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "cumulus metrics limit",
    "rules": [
      {
        "t": "set",
        "p": "limit.bucket",
        "pt": "msg",
        "to": "^((?!system|room|thermostat|agenda|home).)*$",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "limit.measurement",
        "pt": "msg",
        "to": "cumulus",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "limit.field",
        "pt": "msg",
        "to": "",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 540,
    "y": 600,
    "wires": [
      [
        "72ffa082cbdc1b9d"
      ]
    ]
  },
  {
    "id": "8251db7646a04b2f",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "7015463582304bfb",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "add.metrics",
        "pt": "flow",
        "to": "[]",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "metrics",
        "tot": "global"
      },
      {
        "t": "set",
        "p": "limit.bucket",
        "pt": "msg",
        "to": "msg.limit.bucket?msg.limit.bucket:''",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "limit.measurement",
        "pt": "msg",
        "to": "msg.limit.measurement?msg.limit.measurement:''",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "limit.field",
        "pt": "msg",
        "to": "msg.limit.field?msg.limit.field:''",
        "tot": "jsonata"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 250,
    "y": 7940,
    "wires": [
      [
        "c633fa7af533e323"
      ]
    ]
  },
  {
    "id": "c633fa7af533e323",
    "type": "split",
    "z": "2365e16185f43e03",
    "g": "7015463582304bfb",
    "name": "bucket",
    "splt": "\\n",
    "spltType": "str",
    "arraySplt": 1,
    "arraySpltType": "len",
    "stream": false,
    "addname": "bucket",
    "x": 410,
    "y": 7940,
    "wires": [
      [
        "0cad5e616228dbe6"
      ]
    ]
  },
  {
    "id": "5f01b08428c9fcf8",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "7015463582304bfb",
    "name": "add",
    "rules": [
      {
        "t": "set",
        "p": "metric",
        "pt": "msg",
        "to": "{\t    \"label\":msg.bucket&' / '&msg.trans_measurement&' / '&msg.trans,\t    \"value\":msg.bucket&'/'&msg.measurement&'/'&msg.field\t    }",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "metrics",
        "pt": "msg",
        "to": "add.metrics",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "add.metrics",
        "pt": "flow",
        "to": "$append(msg.metrics,msg.metric)",
        "tot": "jsonata"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 3330,
    "y": 7640,
    "wires": [
      [
        "4677d65857fdd766"
      ]
    ]
  },
  {
    "id": "0a5f22f2163e13e8",
    "type": "join",
    "z": "2365e16185f43e03",
    "g": "7015463582304bfb",
    "name": "",
    "mode": "auto",
    "build": "string",
    "property": "payload",
    "propertyType": "msg",
    "key": "topic",
    "joiner": "\\n",
    "joinerType": "str",
    "accumulate": false,
    "timeout": "",
    "count": "",
    "reduceRight": false,
    "reduceExp": "",
    "reduceInit": "",
    "reduceInitType": "",
    "reduceFixup": "",
    "x": 3670,
    "y": 7820,
    "wires": [
      [
        "14826dace9f64caa"
      ]
    ]
  },
  {
    "id": "c0f36549d2db9101",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "7015463582304bfb",
    "name": "options",
    "rules": [
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "add.metrics",
        "tot": "flow"
      },
      {
        "t": "set",
        "p": "options",
        "pt": "msg",
        "to": "$sort(msg.options, function($l, $r) {\t  $l[0].label > $r[0].label\t})",
        "tot": "jsonata"
      },
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "delete",
        "p": "field",
        "pt": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 4000,
    "y": 7880,
    "wires": [
      [
        "bb054a0ac21c4e2a",
        "d9d897c67d8052e6"
      ]
    ]
  },
  {
    "id": "93b51078eda8436a",
    "type": "split",
    "z": "2365e16185f43e03",
    "g": "7015463582304bfb",
    "name": "measurement",
    "splt": "\\n",
    "spltType": "str",
    "arraySplt": 1,
    "arraySpltType": "len",
    "stream": false,
    "addname": "measurement",
    "x": 1180,
    "y": 7820,
    "wires": [
      [
        "6f850f006fee6ac4"
      ]
    ]
  },
  {
    "id": "4f02ff1eca2682e7",
    "type": "split",
    "z": "2365e16185f43e03",
    "g": "7015463582304bfb",
    "name": "field",
    "splt": "\\n",
    "spltType": "str",
    "arraySplt": 1,
    "arraySpltType": "len",
    "stream": false,
    "addname": "field",
    "x": 2010,
    "y": 7700,
    "wires": [
      [
        "5201f0235b76c6fd"
      ]
    ]
  },
  {
    "id": "b267f5eaee065241",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "7015463582304bfb",
    "name": "limit measurement type",
    "property": "measurement",
    "propertyType": "msg",
    "rules": [
      {
        "t": "regex",
        "v": "limit.measurement",
        "vt": "msg",
        "case": false
      },
      {
        "t": "else"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 2,
    "x": 1790,
    "y": 7760,
    "wires": [
      [
        "4f02ff1eca2682e7"
      ],
      [
        "0a5f22f2163e13e8"
      ]
    ]
  },
  {
    "id": "14826dace9f64caa",
    "type": "join",
    "z": "2365e16185f43e03",
    "g": "7015463582304bfb",
    "name": "",
    "mode": "auto",
    "build": "string",
    "property": "payload",
    "propertyType": "msg",
    "key": "topic",
    "joiner": "\\n",
    "joinerType": "str",
    "accumulate": false,
    "timeout": "",
    "count": "",
    "reduceRight": false,
    "reduceExp": "",
    "reduceInit": "",
    "reduceInitType": "",
    "reduceFixup": "",
    "x": 3830,
    "y": 7880,
    "wires": [
      [
        "c0f36549d2db9101"
      ]
    ]
  },
  {
    "id": "4677d65857fdd766",
    "type": "join",
    "z": "2365e16185f43e03",
    "g": "7015463582304bfb",
    "name": "",
    "mode": "auto",
    "build": "string",
    "property": "payload",
    "propertyType": "msg",
    "key": "topic",
    "joiner": "\\n",
    "joinerType": "str",
    "accumulate": false,
    "timeout": "",
    "count": "",
    "reduceRight": false,
    "reduceExp": "",
    "reduceInit": "",
    "reduceInitType": "",
    "reduceFixup": "",
    "x": 3490,
    "y": 7760,
    "wires": [
      [
        "0a5f22f2163e13e8"
      ]
    ]
  },
  {
    "id": "2939004b027e19c6",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "7015463582304bfb",
    "name": "move",
    "rules": [
      {
        "t": "set",
        "p": "old_field",
        "pt": "msg",
        "to": "field",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "field",
        "pt": "msg",
        "to": "measurement",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 2570,
    "y": 7640,
    "wires": [
      [
        "71081512cddb5646"
      ]
    ]
  },
  {
    "id": "71081512cddb5646",
    "type": "link call",
    "z": "2365e16185f43e03",
    "g": "7015463582304bfb",
    "name": "",
    "links": [
      "df0e4ab2e1efc286"
    ],
    "linkType": "static",
    "timeout": "30",
    "x": 2760,
    "y": 7640,
    "wires": [
      [
        "7a783c20a805ad05"
      ]
    ]
  },
  {
    "id": "7a783c20a805ad05",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "7015463582304bfb",
    "name": "move",
    "rules": [
      {
        "t": "set",
        "p": "trans_measurement",
        "pt": "msg",
        "to": "trans",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "field",
        "pt": "msg",
        "to": "old_field",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 2950,
    "y": 7640,
    "wires": [
      [
        "3253e25dfac0d9e4"
      ]
    ]
  },
  {
    "id": "3253e25dfac0d9e4",
    "type": "link call",
    "z": "2365e16185f43e03",
    "g": "7015463582304bfb",
    "name": "",
    "links": [
      "df0e4ab2e1efc286"
    ],
    "linkType": "static",
    "timeout": "30",
    "x": 3140,
    "y": 7640,
    "wires": [
      [
        "5f01b08428c9fcf8"
      ]
    ]
  },
  {
    "id": "12a0232b035189a9",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "7015463582304bfb",
    "name": "has limit",
    "property": "limit.measurement",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "",
        "vt": "str"
      },
      {
        "t": "else"
      }
    ],
    "checkall": "true",
    "repair": false,
    "outputs": 2,
    "x": 1560,
    "y": 7760,
    "wires": [
      [
        "4f02ff1eca2682e7"
      ],
      [
        "b267f5eaee065241"
      ]
    ]
  },
  {
    "id": "5201f0235b76c6fd",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "7015463582304bfb",
    "name": "has limit",
    "property": "limit.field",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "",
        "vt": "str"
      },
      {
        "t": "else"
      }
    ],
    "checkall": "true",
    "repair": false,
    "outputs": 2,
    "x": 2180,
    "y": 7700,
    "wires": [
      [
        "2939004b027e19c6"
      ],
      [
        "2f50e7532f5ba3bb"
      ]
    ]
  },
  {
    "id": "2f50e7532f5ba3bb",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "7015463582304bfb",
    "name": "limit field type",
    "property": "field",
    "propertyType": "msg",
    "rules": [
      {
        "t": "regex",
        "v": "limit.field",
        "vt": "msg",
        "case": false
      },
      {
        "t": "else"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 2,
    "x": 2380,
    "y": 7700,
    "wires": [
      [
        "2939004b027e19c6"
      ],
      [
        "4677d65857fdd766"
      ]
    ]
  },
  {
    "id": "3e8ef8b3ae6caa63",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "7015463582304bfb",
    "name": "has limit",
    "property": "limit.bucket",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "",
        "vt": "str"
      },
      {
        "t": "else"
      }
    ],
    "checkall": "true",
    "repair": false,
    "outputs": 2,
    "x": 760,
    "y": 7880,
    "wires": [
      [
        "93b51078eda8436a"
      ],
      [
        "6f7cf94ff85a540e"
      ]
    ]
  },
  {
    "id": "6f7cf94ff85a540e",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "7015463582304bfb",
    "name": "limit bucket type",
    "property": "bucket",
    "propertyType": "msg",
    "rules": [
      {
        "t": "regex",
        "v": "limit.bucket",
        "vt": "msg",
        "case": false
      },
      {
        "t": "else"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 2,
    "x": 960,
    "y": 7880,
    "wires": [
      [
        "93b51078eda8436a"
      ],
      [
        "14826dace9f64caa"
      ]
    ]
  },
  {
    "id": "0cad5e616228dbe6",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "7015463582304bfb",
    "name": "not empty",
    "property": "payload",
    "propertyType": "msg",
    "rules": [
      {
        "t": "nempty"
      },
      {
        "t": "else"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 2,
    "x": 580,
    "y": 7940,
    "wires": [
      [
        "3e8ef8b3ae6caa63"
      ],
      [
        "14826dace9f64caa"
      ]
    ]
  },
  {
    "id": "6f850f006fee6ac4",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "7015463582304bfb",
    "name": "not empty",
    "property": "payload",
    "propertyType": "msg",
    "rules": [
      {
        "t": "nempty"
      },
      {
        "t": "else"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 2,
    "x": 1380,
    "y": 7820,
    "wires": [
      [
        "12a0232b035189a9"
      ],
      [
        "0a5f22f2163e13e8"
      ]
    ]
  },
  {
    "id": "d9d897c67d8052e6",
    "type": "debug",
    "z": "2365e16185f43e03",
    "g": "7015463582304bfb",
    "name": "scenes - metrics path",
    "active": false,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "true",
    "targetType": "full",
    "statusVal": "",
    "statusType": "auto",
    "x": 4220,
    "y": 7820,
    "wires": []
  },
  {
    "id": "5d841c98941a9b5a",
    "type": "link in",
    "z": "2365e16185f43e03",
    "g": "7015463582304bfb",
    "name": "scenes - metrics path",
    "links": [],
    "x": 115,
    "y": 7940,
    "wires": [
      [
        "8251db7646a04b2f"
      ]
    ]
  },
  {
    "id": "bb054a0ac21c4e2a",
    "type": "link out",
    "z": "2365e16185f43e03",
    "g": "7015463582304bfb",
    "name": "scenes - metrics path",
    "mode": "return",
    "links": [],
    "x": 4135,
    "y": 7880,
    "wires": []
  },
  {
    "id": "27e11297c93404a6",
    "type": "link call",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "",
    "links": [
      "5d841c98941a9b5a"
    ],
    "linkType": "static",
    "timeout": "30",
    "x": 960,
    "y": 420,
    "wires": [
      [
        "8baf78fc5b3a6764"
      ]
    ]
  },
  {
    "id": "71e09030c5018a86",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "toggle metrics limit",
    "rules": [
      {
        "t": "set",
        "p": "limit.bucket",
        "pt": "msg",
        "to": "^((?!agenda|system|thermostat|room).)*$",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "limit.measurement",
        "pt": "msg",
        "to": "(light|outlet)$",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "limit.field",
        "pt": "msg",
        "to": "",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 530,
    "y": 840,
    "wires": [
      [
        "72ffa082cbdc1b9d"
      ]
    ]
  },
  {
    "id": "b0d65e1138250625",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "c3b6b0792764609a",
    "name": "type",
    "property": "type",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "lighting",
        "vt": "str"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 1,
    "x": 1410,
    "y": 2120,
    "wires": [
      [
        "7dc2df581430d4d1"
      ]
    ]
  },
  {
    "id": "7dc2df581430d4d1",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "add.scene[msg.topic]",
        "pt": "flow",
        "to": "payload",
        "tot": "msg"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1570,
    "y": 1580,
    "wires": [
      []
    ]
  },
  {
    "id": "c41fa2b682849fca",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "5ede26c96e5cab06",
    "name": "type",
    "property": "type",
    "propertyType": "msg",
    "rules": [
      {
        "t": "regex",
        "v": "^(lighting|toggle|shading|airflow|cumulus|custom volume|overload)$",
        "vt": "str",
        "case": false
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 1,
    "x": 1410,
    "y": 1460,
    "wires": [
      [
        "7dc2df581430d4d1"
      ]
    ]
  },
  {
    "id": "345de8645bc89741",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "5ede26c96e5cab06",
    "name": "type",
    "property": "type",
    "propertyType": "msg",
    "rules": [
      {
        "t": "regex",
        "v": "^(lighting|toggle|shading|airflow|cumulus|custom volume|overload)$",
        "vt": "str",
        "case": false
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 1,
    "x": 530,
    "y": 1460,
    "wires": [
      [
        "5531a15abd8c4ad6"
      ]
    ]
  },
  {
    "id": "07746cda447f9699",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "0d183185e153399c",
    "name": "raz",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 530,
    "y": 1220,
    "wires": [
      [
        "48cf2bbb95097f63"
      ]
    ]
  },
  {
    "id": "f6c8c74c3a9498c9",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "ecc0370d843384ba",
    "name": "type",
    "property": "type",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "shading",
        "vt": "str"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 1,
    "x": 530,
    "y": 2720,
    "wires": [
      [
        "dec2bb5c514b76a9"
      ]
    ]
  },
  {
    "id": "ab9e2cc1419356f3",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "ecc0370d843384ba",
    "name": "type",
    "property": "type",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "shading",
        "vt": "str"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 1,
    "x": 1410,
    "y": 2720,
    "wires": [
      [
        "7dc2df581430d4d1"
      ]
    ]
  },
  {
    "id": "40bf6c3509b0b82a",
    "type": "ui-switch",
    "z": "2365e16185f43e03",
    "g": "ecc0370d843384ba",
    "name": "daily",
    "label": "Journailer",
    "group": "86da7af07264458b",
    "order": 25,
    "width": "6",
    "height": "1",
    "passthru": true,
    "topic": "daily",
    "topicType": "str",
    "style": "",
    "className": "",
    "onvalue": "true",
    "onvalueType": "bool",
    "onicon": "",
    "oncolor": "",
    "offvalue": "false",
    "offvalueType": "bool",
    "officon": "",
    "offcolor": "",
    "x": 1170,
    "y": 2660,
    "wires": [
      [
        "ab9e2cc1419356f3"
      ]
    ]
  },
  {
    "id": "01761be97488508b",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ecc0370d843384ba",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]daily",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1010,
    "y": 2660,
    "wires": [
      [
        "40bf6c3509b0b82a"
      ]
    ]
  },
  {
    "id": "dec2bb5c514b76a9",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ecc0370d843384ba",
    "name": "class",
    "rules": [
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "add.scene.daily",
        "pt": "flow",
        "to": "false",
        "tot": "bool"
      },
      {
        "t": "set",
        "p": "add.scene.openwork",
        "pt": "flow",
        "to": "14",
        "tot": "num"
      },
      {
        "t": "set",
        "p": "add.scene.luminosity",
        "pt": "flow",
        "to": "0",
        "tot": "num"
      },
      {
        "t": "set",
        "p": "add.scene.delay",
        "pt": "flow",
        "to": "0",
        "tot": "num"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 850,
    "y": 2720,
    "wires": [
      [
        "01761be97488508b",
        "65d34bdd2f650120",
        "ba9ac89e95fd17d8",
        "c9c47f942aa9e47c"
      ]
    ]
  },
  {
    "id": "628815a97e6a49d4",
    "type": "ui-slider",
    "z": "2365e16185f43e03",
    "g": "ecc0370d843384ba",
    "group": "86da7af07264458b",
    "name": "openwork",
    "label": "Ajourer",
    "tooltip": "",
    "order": 22,
    "width": "6",
    "height": "1",
    "passthru": true,
    "outs": "end",
    "topic": "openwork",
    "topicType": "str",
    "thumbLabel": "true",
    "showTicks": "false",
    "min": "0",
    "max": "99",
    "step": "1",
    "className": "",
    "iconPrepend": "",
    "iconAppend": "",
    "color": "",
    "colorTrack": "",
    "colorThumb": "",
    "x": 1180,
    "y": 2720,
    "wires": [
      [
        "ab9e2cc1419356f3"
      ]
    ]
  },
  {
    "id": "65d34bdd2f650120",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ecc0370d843384ba",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]openwork",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1010,
    "y": 2720,
    "wires": [
      [
        "628815a97e6a49d4"
      ]
    ]
  },
  {
    "id": "3d22e5ebcc67c6a4",
    "type": "ui-slider",
    "z": "2365e16185f43e03",
    "g": "ecc0370d843384ba",
    "group": "86da7af07264458b",
    "name": "luminosity",
    "label": "Luminosité",
    "tooltip": "",
    "order": 23,
    "width": "6",
    "height": "1",
    "passthru": true,
    "outs": "end",
    "topic": "luminosity",
    "topicType": "str",
    "thumbLabel": "true",
    "showTicks": "false",
    "min": "0",
    "max": "2500",
    "step": "100",
    "className": "",
    "iconPrepend": "",
    "iconAppend": "",
    "color": "",
    "colorTrack": "",
    "colorThumb": "",
    "x": 1180,
    "y": 2780,
    "wires": [
      [
        "ab9e2cc1419356f3"
      ]
    ]
  },
  {
    "id": "ba9ac89e95fd17d8",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ecc0370d843384ba",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]luminosity",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1010,
    "y": 2780,
    "wires": [
      [
        "3d22e5ebcc67c6a4"
      ]
    ]
  },
  {
    "id": "ce6e7ee22c2f80e1",
    "type": "ui-slider",
    "z": "2365e16185f43e03",
    "g": "ecc0370d843384ba",
    "group": "86da7af07264458b",
    "name": "delay",
    "label": "Retard",
    "tooltip": "",
    "order": 24,
    "width": "6",
    "height": "1",
    "passthru": true,
    "outs": "end",
    "topic": "delay",
    "topicType": "str",
    "thumbLabel": "true",
    "showTicks": "false",
    "min": "0",
    "max": "300",
    "step": "15",
    "className": "",
    "iconPrepend": "",
    "iconAppend": "",
    "color": "",
    "colorTrack": "",
    "colorThumb": "",
    "x": 1170,
    "y": 2840,
    "wires": [
      [
        "ab9e2cc1419356f3"
      ]
    ]
  },
  {
    "id": "c9c47f942aa9e47c",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "ecc0370d843384ba",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]delay",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1010,
    "y": 2840,
    "wires": [
      [
        "ce6e7ee22c2f80e1"
      ]
    ]
  },
  {
    "id": "bf20df3841df8f08",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "custom color metrics limit",
    "rules": [
      {
        "t": "set",
        "p": "limit.bucket",
        "pt": "msg",
        "to": "^((?!agenda|system|thermostat|room).)*$",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "limit.measurement",
        "pt": "msg",
        "to": "(color)$",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "limit.field",
        "pt": "msg",
        "to": "",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 550,
    "y": 960,
    "wires": [
      [
        "72ffa082cbdc1b9d"
      ]
    ]
  },
  {
    "id": "e082053ef394efe4",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "custom level metrics limit",
    "rules": [
      {
        "t": "set",
        "p": "limit.bucket",
        "pt": "msg",
        "to": "^((?!agenda|system|thermostat|room).)*$",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "limit.measurement",
        "pt": "msg",
        "to": "(brightness)$",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "limit.field",
        "pt": "msg",
        "to": "",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 550,
    "y": 1020,
    "wires": [
      [
        "72ffa082cbdc1b9d"
      ]
    ]
  },
  {
    "id": "f7b90fe6011a828b",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "a8e111e3fe3d2a80",
    "name": "type",
    "property": "type",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "custom level",
        "vt": "str"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 1,
    "x": 530,
    "y": 3020,
    "wires": [
      [
        "9c9fe6dcf666a4f5"
      ]
    ]
  },
  {
    "id": "5436202610d4bda0",
    "type": "ui-slider",
    "z": "2365e16185f43e03",
    "g": "a8e111e3fe3d2a80",
    "group": "86da7af07264458b",
    "name": "lower",
    "label": "Minimum",
    "tooltip": "",
    "order": 27,
    "width": "6",
    "height": "1",
    "passthru": true,
    "outs": "end",
    "topic": "lower",
    "topicType": "str",
    "thumbLabel": "true",
    "showTicks": "false",
    "min": "0",
    "max": "255",
    "step": "5",
    "className": "",
    "iconPrepend": "",
    "iconAppend": "",
    "color": "",
    "colorTrack": "",
    "colorThumb": "",
    "x": 1170,
    "y": 2960,
    "wires": [
      [
        "5c4464e9a6f4156d"
      ]
    ]
  },
  {
    "id": "9afda004f8a34bfe",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "a8e111e3fe3d2a80",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]lower",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1010,
    "y": 2960,
    "wires": [
      [
        "5436202610d4bda0"
      ]
    ]
  },
  {
    "id": "5c4464e9a6f4156d",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "a8e111e3fe3d2a80",
    "name": "type",
    "property": "type",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "custom level",
        "vt": "str"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 1,
    "x": 1410,
    "y": 3020,
    "wires": [
      [
        "7dc2df581430d4d1"
      ]
    ]
  },
  {
    "id": "9c9fe6dcf666a4f5",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "a8e111e3fe3d2a80",
    "name": "class",
    "rules": [
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "add.scene.lower",
        "pt": "flow",
        "to": "5",
        "tot": "num"
      },
      {
        "t": "set",
        "p": "add.scene.higher",
        "pt": "flow",
        "to": "95",
        "tot": "num"
      },
      {
        "t": "set",
        "p": "add.scene.step",
        "pt": "flow",
        "to": "10",
        "tot": "num"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 850,
    "y": 3020,
    "wires": [
      [
        "9afda004f8a34bfe",
        "2a05b7fd7c41803e",
        "5ddb0d681bee936e"
      ]
    ]
  },
  {
    "id": "fdc361fd00366501",
    "type": "ui-slider",
    "z": "2365e16185f43e03",
    "g": "a8e111e3fe3d2a80",
    "group": "86da7af07264458b",
    "name": "higher",
    "label": "Maximum",
    "tooltip": "",
    "order": 26,
    "width": "6",
    "height": "1",
    "passthru": true,
    "outs": "end",
    "topic": "higher",
    "topicType": "str",
    "thumbLabel": "true",
    "showTicks": "false",
    "min": "0",
    "max": "255",
    "step": "5",
    "className": "",
    "iconPrepend": "",
    "iconAppend": "",
    "color": "",
    "colorTrack": "",
    "colorThumb": "",
    "x": 1170,
    "y": 3020,
    "wires": [
      [
        "5c4464e9a6f4156d"
      ]
    ]
  },
  {
    "id": "2a05b7fd7c41803e",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "a8e111e3fe3d2a80",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]higher",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1010,
    "y": 3020,
    "wires": [
      [
        "fdc361fd00366501"
      ]
    ]
  },
  {
    "id": "080732e991ac90fa",
    "type": "ui-slider",
    "z": "2365e16185f43e03",
    "g": "a8e111e3fe3d2a80",
    "group": "86da7af07264458b",
    "name": "step",
    "label": "Pas",
    "tooltip": "",
    "order": 28,
    "width": "6",
    "height": "1",
    "passthru": true,
    "outs": "end",
    "topic": "step",
    "topicType": "str",
    "thumbLabel": "true",
    "showTicks": "false",
    "min": "0",
    "max": "50",
    "step": "5",
    "className": "",
    "iconPrepend": "",
    "iconAppend": "",
    "color": "",
    "colorTrack": "",
    "colorThumb": "",
    "x": 1170,
    "y": 3080,
    "wires": [
      [
        "5c4464e9a6f4156d"
      ]
    ]
  },
  {
    "id": "5ddb0d681bee936e",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "a8e111e3fe3d2a80",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]step",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1010,
    "y": 3080,
    "wires": [
      [
        "080732e991ac90fa"
      ]
    ]
  },
  {
    "id": "297f97a073fc8b2b",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "61fa65faa84a6ec6",
    "name": "type",
    "property": "type",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "airflow",
        "vt": "str"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 1,
    "x": 530,
    "y": 3200,
    "wires": [
      [
        "41b449c7d8e26289"
      ]
    ]
  },
  {
    "id": "3b307fadcb62da76",
    "type": "ui-slider",
    "z": "2365e16185f43e03",
    "g": "61fa65faa84a6ec6",
    "group": "86da7af07264458b",
    "name": "timer",
    "label": "Minuterie",
    "tooltip": "",
    "order": 29,
    "width": "6",
    "height": "1",
    "passthru": true,
    "outs": "end",
    "topic": "timer",
    "topicType": "str",
    "thumbLabel": "true",
    "showTicks": "false",
    "min": "0",
    "max": "120",
    "step": "5",
    "className": "",
    "iconPrepend": "",
    "iconAppend": "",
    "color": "",
    "colorTrack": "",
    "colorThumb": "",
    "x": 1170,
    "y": 3200,
    "wires": [
      [
        "361dbaae56cc5dcf"
      ]
    ]
  },
  {
    "id": "3bd767f2b6f40d10",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "61fa65faa84a6ec6",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]timer",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1010,
    "y": 3200,
    "wires": [
      [
        "3b307fadcb62da76"
      ]
    ]
  },
  {
    "id": "361dbaae56cc5dcf",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "61fa65faa84a6ec6",
    "name": "type",
    "property": "type",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "airflow",
        "vt": "str"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 1,
    "x": 1410,
    "y": 3200,
    "wires": [
      [
        "7dc2df581430d4d1"
      ]
    ]
  },
  {
    "id": "41b449c7d8e26289",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "61fa65faa84a6ec6",
    "name": "class",
    "rules": [
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "add.scene.timer",
        "pt": "flow",
        "to": "30",
        "tot": "num"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 850,
    "y": 3200,
    "wires": [
      [
        "3bd767f2b6f40d10"
      ]
    ]
  },
  {
    "id": "cdde925551f9a2f0",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "305f8572101f2828",
    "name": "type",
    "property": "type",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "cumulus",
        "vt": "str"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 1,
    "x": 530,
    "y": 3320,
    "wires": [
      [
        "0351d85db24c2a3e"
      ]
    ]
  },
  {
    "id": "fc9bbcdfe0657653",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "305f8572101f2828",
    "name": "type",
    "property": "type",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "cumulus",
        "vt": "str"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 1,
    "x": 1410,
    "y": 3320,
    "wires": [
      [
        "7dc2df581430d4d1"
      ]
    ]
  },
  {
    "id": "bdc3bb4cfb40ad78",
    "type": "ui-slider",
    "z": "2365e16185f43e03",
    "g": "305f8572101f2828",
    "group": "86da7af07264458b",
    "name": "timer",
    "label": "Minuterie",
    "tooltip": "",
    "order": 30,
    "width": "6",
    "height": "1",
    "passthru": true,
    "outs": "end",
    "topic": "timer",
    "topicType": "str",
    "thumbLabel": "true",
    "showTicks": "false",
    "min": "15",
    "max": "240",
    "step": "15",
    "className": "",
    "iconPrepend": "",
    "iconAppend": "",
    "color": "",
    "colorTrack": "",
    "colorThumb": "",
    "x": 1170,
    "y": 3320,
    "wires": [
      [
        "fc9bbcdfe0657653"
      ]
    ]
  },
  {
    "id": "b7e0ba1ac6f9000a",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "305f8572101f2828",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]timer",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1010,
    "y": 3320,
    "wires": [
      [
        "bdc3bb4cfb40ad78"
      ]
    ]
  },
  {
    "id": "0351d85db24c2a3e",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "305f8572101f2828",
    "name": "class",
    "rules": [
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "add.scene.timer",
        "pt": "flow",
        "to": "30",
        "tot": "num"
      },
      {
        "t": "set",
        "p": "add.scene.daily",
        "pt": "flow",
        "to": "false",
        "tot": "bool"
      },
      {
        "t": "set",
        "p": "add.scene.nocturnal",
        "pt": "flow",
        "to": "true",
        "tot": "bool"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 850,
    "y": 3320,
    "wires": [
      [
        "b7e0ba1ac6f9000a",
        "311d865b504f9e2b",
        "313c321884c92f08"
      ]
    ]
  },
  {
    "id": "5593308d95ecb45d",
    "type": "ui-switch",
    "z": "2365e16185f43e03",
    "g": "305f8572101f2828",
    "name": "daily",
    "label": "Journailer",
    "group": "86da7af07264458b",
    "order": 32,
    "width": "6",
    "height": "1",
    "passthru": true,
    "topic": "daily",
    "topicType": "str",
    "style": "",
    "className": "",
    "onvalue": "true",
    "onvalueType": "bool",
    "onicon": "",
    "oncolor": "",
    "offvalue": "false",
    "offvalueType": "bool",
    "officon": "",
    "offcolor": "",
    "x": 1170,
    "y": 3380,
    "wires": [
      [
        "fc9bbcdfe0657653"
      ]
    ]
  },
  {
    "id": "311d865b504f9e2b",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "305f8572101f2828",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]daily",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1010,
    "y": 3380,
    "wires": [
      [
        "5593308d95ecb45d"
      ]
    ]
  },
  {
    "id": "1c251fd76d55194c",
    "type": "ui-switch",
    "z": "2365e16185f43e03",
    "g": "305f8572101f2828",
    "name": "nocturnal",
    "label": "Nocturne",
    "group": "86da7af07264458b",
    "order": 31,
    "width": "6",
    "height": "1",
    "passthru": true,
    "topic": "nocturnal",
    "topicType": "str",
    "style": "",
    "className": "",
    "onvalue": "true",
    "onvalueType": "bool",
    "onicon": "",
    "oncolor": "",
    "offvalue": "false",
    "offvalueType": "bool",
    "officon": "",
    "offcolor": "",
    "x": 1180,
    "y": 3440,
    "wires": [
      [
        "fc9bbcdfe0657653"
      ]
    ]
  },
  {
    "id": "313c321884c92f08",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "305f8572101f2828",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]nocturnal",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1010,
    "y": 3440,
    "wires": [
      [
        "1c251fd76d55194c"
      ]
    ]
  },
  {
    "id": "dc9f51f48adc1d8a",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "snapshot metrics limit",
    "rules": [
      {
        "t": "set",
        "p": "limit.bucket",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "limit.measurement",
        "pt": "msg",
        "to": "camera",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "limit.field",
        "pt": "msg",
        "to": "",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 540,
    "y": 660,
    "wires": [
      [
        "72ffa082cbdc1b9d"
      ]
    ]
  },
  {
    "id": "86f50642027670e1",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "thermostat metrics limit",
    "rules": [
      {
        "t": "set",
        "p": "limit.bucket",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "limit.measurement",
        "pt": "msg",
        "to": "thermostat",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "limit.field",
        "pt": "msg",
        "to": "pilot",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 550,
    "y": 720,
    "wires": [
      []
    ]
  },
  {
    "id": "98d0f4551cf7be28",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "custom volume metrics limit",
    "rules": [
      {
        "t": "set",
        "p": "limit.bucket",
        "pt": "msg",
        "to": "^((?!agenda|system|thermostat|room).)*$",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "limit.measurement",
        "pt": "msg",
        "to": "volume",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "limit.field",
        "pt": "msg",
        "to": "",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 560,
    "y": 1080,
    "wires": [
      [
        "72ffa082cbdc1b9d"
      ]
    ]
  },
  {
    "id": "611c8a5cd84bb73d",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "3a3b15706a4f52c8",
    "name": "overload metrics limit",
    "rules": [
      {
        "t": "set",
        "p": "limit.bucket",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "limit.measurement",
        "pt": "msg",
        "to": "overload",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "limit.field",
        "pt": "msg",
        "to": "",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 540,
    "y": 780,
    "wires": [
      [
        "72ffa082cbdc1b9d"
      ]
    ]
  },
  {
    "id": "eaddd489b98a436f",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "aa5b3856a38f9e8d",
    "name": "type",
    "property": "type",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "overload",
        "vt": "str"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 1,
    "x": 530,
    "y": 3560,
    "wires": [
      [
        "3d81cbda3748f441"
      ]
    ]
  },
  {
    "id": "3d81cbda3748f441",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "aa5b3856a38f9e8d",
    "name": "class",
    "rules": [
      {
        "t": "set",
        "p": "class",
        "pt": "msg",
        "to": "",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "add.scene.timer",
        "pt": "flow",
        "to": "30",
        "tot": "num"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 850,
    "y": 3560,
    "wires": [
      [
        "56e2b31789bb941e"
      ]
    ]
  },
  {
    "id": "56e2b31789bb941e",
    "type": "change",
    "z": "2365e16185f43e03",
    "g": "aa5b3856a38f9e8d",
    "name": "set",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "scenes[msg.type][msg.payload]timer",
        "tot": "global"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1010,
    "y": 3560,
    "wires": [
      [
        "dc0df57eb59c0a2c"
      ]
    ]
  },
  {
    "id": "dc0df57eb59c0a2c",
    "type": "ui-slider",
    "z": "2365e16185f43e03",
    "g": "aa5b3856a38f9e8d",
    "group": "86da7af07264458b",
    "name": "timer",
    "label": "Minuterie",
    "tooltip": "",
    "order": 33,
    "width": "6",
    "height": "1",
    "passthru": true,
    "outs": "end",
    "topic": "timer",
    "topicType": "str",
    "thumbLabel": "true",
    "showTicks": "false",
    "min": "1",
    "max": "120",
    "step": "1",
    "className": "",
    "iconPrepend": "",
    "iconAppend": "",
    "color": "",
    "colorTrack": "",
    "colorThumb": "",
    "x": 1170,
    "y": 3560,
    "wires": [
      [
        "a575dd7d3df63cc2"
      ]
    ]
  },
  {
    "id": "a575dd7d3df63cc2",
    "type": "switch",
    "z": "2365e16185f43e03",
    "g": "aa5b3856a38f9e8d",
    "name": "type",
    "property": "type",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "overload",
        "vt": "str"
      }
    ],
    "checkall": "false",
    "repair": false,
    "outputs": 1,
    "x": 1410,
    "y": 3560,
    "wires": [
      [
        "7dc2df581430d4d1"
      ]
    ]
  }
]